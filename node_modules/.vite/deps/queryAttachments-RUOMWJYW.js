import {
  l
} from "./chunk-4PJMJTU2.js";
import {
  t
} from "./chunk-B5TYSRH2.js";
import "./chunk-7A5C2EQ3.js";
import "./chunk-OYBXMT5R.js";
import "./chunk-CIDWM2UN.js";
import "./chunk-PD5Q7TDW.js";
import "./chunk-SHJI4PR4.js";
import "./chunk-2YSHZRCT.js";
import {
  j
} from "./chunk-HKVL2MJK.js";
import {
  i
} from "./chunk-MH2LNFJK.js";
import {
  S
} from "./chunk-O3CHVGVF.js";
import "./chunk-HNHXEGH2.js";
import "./chunk-DWOEYHKS.js";
import "./chunk-W2N7YT6I.js";
import "./chunk-I5JT24BO.js";
import "./chunk-I4U7MQNO.js";
import "./chunk-76J2PTFD.js";

// node_modules/@arcgis/core/rest/query/operations/queryAttachments.js
function s(t2) {
  const o = t2.toJSON();
  return o.attachmentTypes && (o.attachmentTypes = o.attachmentTypes.join(",")), o.keywords && (o.keywords = o.keywords.join(",")), o.globalIds && (o.globalIds = o.globalIds.join(",")), o.objectIds && (o.objectIds = o.objectIds.join(",")), o.size && (o.size = o.size.join(",")), o;
}
function a(o, n) {
  const s2 = {};
  for (const a2 of n) {
    const { parentObjectId: n2, parentGlobalId: c2, attachmentInfos: m2 } = a2;
    for (const a3 of m2) {
      const { id: m3 } = a3, p = S(i(`${o.path}/${n2}/attachments/${m3}`)), i2 = l.fromJSON(a3);
      i2.set({ url: p, parentObjectId: n2, parentGlobalId: c2 }), s2[n2] ? s2[n2].push(i2) : s2[n2] = [i2];
    }
  }
  return s2;
}
function c(t2, e, r) {
  let a2 = { query: t({ ...t2.query, f: "json", ...s(e) }) };
  return r && (a2 = { ...r, ...a2, query: { ...r.query, ...a2.query } }), j(t2.path + "/queryAttachments", a2).then((t3) => t3.data.attachmentGroups);
}
async function m(t2, e, n) {
  const { objectIds: r } = e, s2 = [];
  for (const a2 of r)
    s2.push(j(t2.path + "/" + a2 + "/attachments", n));
  return Promise.all(s2).then((t3) => r.map((o, e2) => ({ parentObjectId: o, attachmentInfos: t3[e2].data.attachmentInfos })));
}
export {
  c as executeAttachmentQuery,
  m as fetchAttachments,
  a as processAttachmentQueryResult
};
//# sourceMappingURL=queryAttachments-RUOMWJYW.js.map
