import {
  o,
  p
} from "./chunk-DWOEYHKS.js";
import {
  s3 as s
} from "./chunk-W2N7YT6I.js";

// node_modules/@arcgis/core/core/events.js
function e(e3) {
  return e3 && ("function" == typeof e3.on || "function" == typeof e3.addEventListener);
}
function r(r2, t3, n) {
  if (!e(r2))
    throw new TypeError("target is not a Evented or EventTarget object");
  if ("on" in r2)
    return r2.on(t3, n);
  if (Array.isArray(t3)) {
    const e3 = t3.slice();
    for (const t4 of e3)
      r2.addEventListener(t4, n);
    return { remove() {
      for (const t4 of e3)
        r2.removeEventListener(t4, n);
    } };
  }
  return r2.addEventListener(t3, n), { remove() {
    r2.removeEventListener(t3, n);
  } };
}
function t(t3, n, o3) {
  if (!e(t3))
    throw new TypeError("target is not a Evented or EventTarget object");
  if ("once" in t3)
    return t3.once(n, o3);
  const i2 = r(t3, n, (e3) => {
    i2.remove(), o3.call(t3, e3);
  });
  return { remove() {
    i2.remove();
  } };
}
var o2 = { Win: "Meta", Scroll: "ScrollLock", Spacebar: " ", Down: "ArrowDown", Left: "ArrowLeft", Right: "ArrowRight", Up: "ArrowUp", Del: "Delete", Apps: "ContextMenu", Esc: "Escape", Multiply: "*", Add: "+", Subtract: "-", Decimal: ".", Divide: "/" };
function i({ key: e3 }) {
  return o2[e3] || e3;
}

// node_modules/@arcgis/core/core/clock.js
function e2(e3) {
  return { setTimeout: (t3, o3) => {
    const r2 = e3.setTimeout(t3, o3);
    return { remove: () => e3.clearTimeout(r2) };
  } };
}
var t2 = e2(globalThis);

// node_modules/@arcgis/core/core/promiseUtils.js
function c(t3 = "Aborted") {
  return new s("AbortError", t3);
}
function s3(t3, r2 = "Aborted") {
  if (a(t3))
    throw c(r2);
}
function l(t3) {
  return null != t3 ? "aborted" in t3 ? t3 : t3.signal : t3;
}
function a(t3) {
  const r2 = l(t3);
  return null != r2 && r2.aborted;
}
function f(t3) {
  if (d(t3))
    throw t3;
}
function m(t3) {
  if (!d(t3))
    throw t3;
}
function w(t3, r2) {
  const e3 = l(t3);
  if (null != e3) {
    if (!e3.aborted)
      return t(e3, "abort", () => r2());
    r2();
  }
}
function h(t3, r2) {
  const e3 = l(t3);
  if (null != e3)
    return s3(e3), t(e3, "abort", () => r2(c()));
}
function p2(t3, r2) {
  return null == l(r2) ? t3 : new Promise((n, e3) => {
    let i2 = w(r2, () => e3(c()));
    const u = () => i2 = o(i2);
    t3.then(u, u), t3.then(n, e3);
  });
}
function d(t3) {
  return "AbortError" === (t3 == null ? void 0 : t3.name);
}
async function y(t3) {
  try {
    return await t3;
  } catch (r2) {
    if (!d(r2))
      throw r2;
    return;
  }
}
async function j(t3) {
  if (!t3)
    return;
  if ("function" != typeof t3.forEach) {
    const r3 = Object.keys(t3), n = r3.map((r4) => t3[r4]), e3 = await j(n), o3 = {};
    return r3.map((t4, r4) => o3[t4] = e3[r4]), o3;
  }
  const r2 = t3;
  return Promise.allSettled(r2).then((t4) => Array.from(r2, (r3, n) => {
    const e3 = t4[n];
    return "fulfilled" === e3.status ? { promise: r3, value: e3.value } : { promise: r3, error: e3.reason };
  }));
}
async function P(t3) {
  return (await j(t3)).filter((t4) => !!t4.value).map((t4) => t4.value);
}
function g(t3, r2 = void 0, n) {
  const e3 = new AbortController();
  return w(n, () => e3.abort()), new Promise((n2, o3) => {
    let i2 = setTimeout(() => {
      i2 = 0, n2(r2);
    }, t3);
    w(e3, () => {
      i2 && (clearTimeout(i2), o3(c()));
    });
  });
}
function T(t3) {
  return t3 && "function" == typeof t3.then;
}
function E(t3) {
  return T(t3) ? t3 : Promise.resolve(t3);
}
function k(t3, r2 = -1) {
  let n, e3, o3, u, s4 = null;
  const l2 = (...a2) => {
    if (n) {
      e3 = a2, u && u.reject(c()), u = C();
      const t4 = p(u.promise);
      if (s4) {
        const t5 = s4;
        s4 = null, t5.abort();
      }
      return t4;
    }
    if (o3 = u || C(), u = null, r2 > 0) {
      const e4 = new AbortController();
      n = E(t3(...a2, e4.signal));
      const o4 = n;
      g(r2).then(() => {
        n === o4 && (u ? e4.abort() : s4 = e4);
      });
    } else
      n = 1, n = E(t3(...a2));
    const f2 = () => {
      const t4 = e3;
      e3 = o3 = n = s4 = null, null != t4 && l2(...t4);
    }, m2 = n, w2 = o3;
    return m2.then(f2, f2), m2.then(w2.resolve, w2.reject), p(w2.promise);
  };
  return l2;
}
function C() {
  let r2, n;
  const e3 = new Promise((t3, e4) => {
    r2 = t3, n = e4;
  }), o3 = (t3) => {
    r2(t3);
  };
  return o3.resolve = (t3) => r2(t3), o3.reject = (t3) => n(t3), o3.timeout = (r3, n2) => t2.setTimeout(() => o3.reject(n2), r3), o3.promise = e3, o3;
}
async function $(t3) {
  await Promise.resolve(), s3(t3);
}

export {
  t2 as t,
  e,
  r,
  i,
  c,
  s3 as s,
  a,
  f,
  m,
  w,
  h,
  p2 as p,
  d,
  y,
  j,
  P,
  g,
  T,
  E,
  k,
  C,
  $
};
//# sourceMappingURL=chunk-HNHXEGH2.js.map
