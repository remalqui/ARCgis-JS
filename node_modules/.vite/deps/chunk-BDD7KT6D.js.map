{
  "version": 3,
  "sources": ["../../@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js", "../../@arcgis/core/rest/query/executeQueryPBF.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{assertIsSome as e,unwrapOrThrow as t}from\"../../../core/maybe.js\";import{getGeometryZScaler as r}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as s,convertToGeometry as o}from\"../../../layers/graphics/featureConversionUtils.js\";function i(e,t){return t}function n(e,t,r,s){switch(r){case 0:return d(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?d(e,t+s,1):l(e,t+s,1)}}function a(e,t,r,s){return 2===r?d(e,t,2):n(e,t,r,s)}function h(e,t,r,s){return 2===r?d(e,t,3):n(e,t,r,s)}function u(e,t,r,s){return 3===r?d(e,t,3):a(e,t,r,s)}function d({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class c{constructor(e){this._options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=i,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=r(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(t,r){const s=t.fields;e(s),s.push(r);const o=s.map((e=>e.name));this._attributesConstructor=function(){for(const e of o)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:i}=t,n=s(r.clone(),r,!1,!1,this._transform),a=o(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,r,s){const o=t(this._transform,\"transform\");switch(r=this._applyTransform(o,r,s,0),s){case 0:e.x=r;break;case 1:e.y=r;break;case 2:\"z\"in e?e.z=r:e.m=r;break;case 3:e.m=r}}_transformPathLikeValue(e,r){let s=0;r<=1&&(s=this._previousCoordinate[r],this._previousCoordinate[r]+=e);const o=t(this._transform,\"transform\");return this._applyTransform(o,e,r,s)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?u:t?a:r?h:n}}export{c as JSONFeatureSetParserContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t){const s=await n(r,a.from(e),t);return o.fromJSON(s)}async function n(o,s,n){const p=r(o),i={...n},u=a.from(s),m=!u.quantizationParameters,{data:f}=await t(p,u,new e({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}export{s as executeQueryPBF,n as executeRawQueryPBF};\n"],
  "mappings": "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",
  "names": ["t", "r", "u", "c", "e", "i", "n", "a", "n", "i", "u", "f", "c"]
}
