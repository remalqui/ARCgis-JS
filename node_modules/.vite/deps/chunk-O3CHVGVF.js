import {
  p
} from "./chunk-DWOEYHKS.js";
import {
  s,
  s2,
  s3
} from "./chunk-W2N7YT6I.js";
import {
  R
} from "./chunk-I4U7MQNO.js";

// node_modules/@arcgis/core/portal/support/urlUtils.js
var e = /^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i;
var s4 = { devext: { customBaseUrl: "mapsdevext.arcgis.com", portalHostname: "devext.arcgis.com" }, qaext: { customBaseUrl: "mapsqa.arcgis.com", portalHostname: "qaext.arcgis.com" }, www: { customBaseUrl: "maps.arcgis.com", portalHostname: "www.arcgis.com" } };
function a(a3) {
  const t3 = a3 == null ? void 0 : a3.match(e);
  if (!t3)
    return null;
  const [, r, o, l2] = t3;
  if (!r)
    return null;
  let c2 = null, m2 = null, n = null;
  const { devext: u2, qaext: i, www: p3 } = s4;
  if (o)
    if (c2 = r, l2)
      switch (l2.toLowerCase()) {
        case "devext":
          ({ customBaseUrl: m2, portalHostname: n } = u2);
          break;
        case "qa":
          ({ customBaseUrl: m2, portalHostname: n } = i);
          break;
        default:
          return null;
      }
    else
      ({ customBaseUrl: m2, portalHostname: n } = p3);
  else
    switch (r.toLowerCase()) {
      case "devext":
        ({ customBaseUrl: m2, portalHostname: n } = u2);
        break;
      case "qaext":
        ({ customBaseUrl: m2, portalHostname: n } = i);
        break;
      case "www":
        ({ customBaseUrl: m2, portalHostname: n } = p3);
        break;
      default:
        return null;
    }
  return { customBaseUrl: m2, isPortal: false, portalHostname: n, urlKey: c2 };
}
function t(e2) {
  return /\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e2);
}

// node_modules/@arcgis/core/support/base64Utils.js
function t2(t3) {
  const e2 = atob(t3), n = new Uint8Array(e2.length);
  for (let r = 0; r < e2.length; r++)
    n[r] = e2.charCodeAt(r);
  return n.buffer;
}

// node_modules/@arcgis/core/core/urlUtils.js
var u = s2.getLogger("esri.core.urlUtils");
var l = s.request;
var c = "esri/config: esriConfig.request.proxyUrl is not set.";
var f = /^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i;
var a2 = /^\s*http:/i;
var p2 = /^\s*https:/i;
var h = /^\s*file:/i;
var m = /:\d+$/;
var d = /^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
var g = new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$");
var y = new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");
var $ = class {
  constructor(t3 = "") {
    this.uri = t3, this.scheme = null, this.authority = null, this.path = null, this.query = null, this.fragment = null, this.user = null, this.password = null, this.host = null, this.port = null;
    let n = p(this.uri.match(g));
    this.scheme = n[2] || (n[1] ? "" : null), this.authority = n[4] || (n[3] ? "" : null), this.path = n[5], this.query = n[7] || (n[6] ? "" : null), this.fragment = n[9] || (n[8] ? "" : null), null != this.authority && (n = p(this.authority.match(y)), this.user = n[3] || null, this.password = n[4] || null, this.host = n[6] || n[7], this.port = n[9] || null);
  }
  toString() {
    return this.uri;
  }
};
var x = {};
var w = new $(s.applicationUrl);
var O = w;
var U = q();
var C = U;
var R2 = () => O;
var b = () => C;
function q() {
  const t3 = p(O.path), n = t3.substring(0, t3.lastIndexOf(t3.split("/")[t3.split("/").length - 1]));
  return `${`${O.scheme}://${O.host}${null != O.port ? `:${O.port}` : ""}`}${n}`;
}
function L(t3) {
  if (!t3)
    return null;
  const n = { path: null, query: null }, e2 = new $(t3), r = t3.indexOf("?");
  return null === e2.query ? n.path = t3 : (n.path = t3.substring(0, r), n.query = I(e2.query)), e2.fragment && (n.hash = e2.fragment, null === e2.query && (n.path = n.path.substring(0, n.path.length - (e2.fragment.length + 1)))), n;
}
function I(t3) {
  const n = t3.split("&"), e2 = {};
  for (const r of n) {
    if (!r)
      continue;
    const t4 = r.indexOf("=");
    let n2, o;
    t4 < 0 ? (n2 = decodeURIComponent(r), o = "") : (n2 = decodeURIComponent(r.slice(0, t4)), o = decodeURIComponent(r.slice(t4 + 1)));
    let i = e2[n2];
    "string" == typeof i && (i = e2[n2] = [i]), Array.isArray(i) ? i.push(o) : e2[n2] = o;
  }
  return e2;
}
function A(t3) {
  return t3 && "object" == typeof t3 && "toJSON" in t3 && "function" == typeof t3.toJSON;
}
function v(t3, n) {
  return t3 ? n && "function" == typeof n ? Object.keys(t3).map((e2) => encodeURIComponent(e2) + "=" + encodeURIComponent(n(e2, t3[e2]))).join("&") : Object.keys(t3).map((e2) => {
    const r = t3[e2];
    if (null == r)
      return "";
    const o = encodeURIComponent(e2) + "=", i = n && n[e2];
    return i ? o + encodeURIComponent(i(r)) : Array.isArray(r) ? r.map((t4) => A(t4) ? o + encodeURIComponent(JSON.stringify(t4)) : o + encodeURIComponent(t4)).join("&") : A(r) ? o + encodeURIComponent(JSON.stringify(r)) : o + encodeURIComponent(r);
  }).filter((t4) => t4).join("&") : "";
}
function P(t3 = false) {
  let n, r = l.proxyUrl;
  if ("string" == typeof t3) {
    n = ht(t3);
    const e2 = J(t3);
    e2 && (r = e2.proxyUrl);
  } else
    n = !!t3;
  if (!r)
    throw u.warn(c), new s3("urlutils:proxy-not-set", c);
  n && xt() && (r = yt(r));
  return L(r);
}
function S(t3) {
  const n = J(t3);
  let e2, r;
  if (n) {
    const t4 = E(n.proxyUrl);
    e2 = t4.path, r = t4.query ? I(t4.query) : null;
  }
  if (e2) {
    const n2 = L(t3);
    t3 = e2 + "?" + n2.path;
    const o = v({ ...r, ...n2.query });
    o && (t3 = `${t3}?${o}`);
  }
  return t3;
}
var k = { path: "", query: "" };
function E(t3) {
  const n = t3.indexOf("?");
  return -1 !== n ? (k.path = t3.slice(0, n), k.query = t3.slice(n + 1)) : (k.path = t3, k.query = null), k;
}
function B(t3) {
  return t3 = (t3 = wt(t3 = Rt(t3 = E(t3).path), true)).toLowerCase();
}
function H(t3) {
  const n = { proxyUrl: t3.proxyUrl, urlPrefix: B(t3.urlPrefix) }, e2 = l.proxyRules, r = n.urlPrefix;
  let o = e2.length;
  for (let i = 0; i < e2.length; i++) {
    const t4 = e2[i].urlPrefix;
    if (0 === r.indexOf(t4)) {
      if (r.length === t4.length)
        return -1;
      o = i;
      break;
    }
    0 === t4.indexOf(r) && (o = i + 1);
  }
  return e2.splice(o, 0, n), o;
}
function J(t3) {
  const n = l.proxyRules, e2 = B(t3);
  for (let r = 0; r < n.length; r++)
    if (0 === e2.indexOf(n[r].urlPrefix))
      return n[r];
}
function N(t3, n) {
  if (!t3 || !n)
    return false;
  t3 = z(t3), n = z(n);
  const e2 = a(t3), r = a(n);
  return null != e2 && null != r ? e2.portalHostname === r.portalHostname : null == e2 && null == r && F(t3, n, true);
}
function W(t3, n) {
  return t3 = z(t3), n = z(n), wt(t3) === wt(n);
}
function z(t3) {
  const n = (t3 = K(t3)).indexOf("/sharing");
  return n > 0 ? t3.substring(0, n) : t3.replace(/\/+$/, "");
}
function D(t3) {
  const n = (n2) => null == n2 || n2 instanceof RegExp && n2.test(t3) || "string" == typeof n2 && t3.startsWith(n2), e2 = l.interceptors;
  if (e2) {
    for (const r of e2)
      if (Array.isArray(r.urls)) {
        if (r.urls.some(n))
          return r;
      } else if (n(r.urls))
        return r;
  }
  return null;
}
function F(t3, n, e2 = false) {
  if (!t3 || !n)
    return false;
  const r = At(t3), o = At(n);
  return !(!e2 && r.scheme !== o.scheme) && (null != r.host && null != o.host && (r.host.toLowerCase() === o.host.toLowerCase() && r.port === o.port));
}
function M(t3) {
  if ("string" == typeof t3) {
    if (!Y(t3))
      return true;
    t3 = At(t3);
  }
  if (F(t3, O))
    return true;
  const n = l.trustedServers || [];
  for (let e2 = 0; e2 < n.length; e2++) {
    const r = Q(n[e2]);
    for (let n2 = 0; n2 < r.length; n2++)
      if (F(t3, r[n2]))
        return true;
  }
  return false;
}
function Q(t3) {
  return x[t3] || (pt(t3) || at(t3) ? x[t3] = [new $(_(t3))] : x[t3] = [new $(`http://${t3}`), new $(`https://${t3}`)]), x[t3];
}
function _(t3, n = C, e2) {
  return at(t3) ? e2 && e2.preserveProtocolRelative ? t3 : "http" === O.scheme && O.authority === X(t3).slice(2) ? `http:${t3}` : `https:${t3}` : pt(t3) ? t3 : p(V("/" === t3[0] ? Ot(n) : n, t3));
}
function G(t3, n = C, e2) {
  if (null == t3 || !Y(t3))
    return t3;
  const r = K(t3), o = r.toLowerCase(), i = K(n).toLowerCase().replace(/\/+$/, ""), s5 = e2 ? K(e2).toLowerCase().replace(/\/+$/, "") : null;
  if (s5 && 0 !== i.indexOf(s5))
    return t3;
  const u2 = (t4, n2, e3) => -1 === (e3 = t4.indexOf(n2, e3)) ? t4.length : e3;
  let l2 = u2(o, "/", o.indexOf("//") + 2), c2 = -1;
  for (; o.slice(0, l2 + 1) === i.slice(0, l2) + "/" && (c2 = l2 + 1, l2 !== o.length); )
    l2 = u2(o, "/", l2 + 1);
  if (-1 === c2)
    return t3;
  if (s5 && c2 < s5.length)
    return t3;
  t3 = r.slice(c2);
  const f2 = i.slice(c2 - 1).replaceAll(/[^/]+/g, "").length;
  if (f2 > 0)
    for (let a3 = 0; a3 < f2; a3++)
      t3 = `../${t3}`;
  else
    t3 = `./${t3}`;
  return t3;
}
function K(t3) {
  return t3 = Lt(t3 = jt(t3 = qt(t3 = _(t3 = t3.trim()))));
}
function V(...t3) {
  const e2 = t3.filter(R);
  if (!e2 || !e2.length)
    return;
  const r = [];
  if (Y(e2[0])) {
    const t4 = e2[0], n = t4.indexOf("//");
    -1 !== n && (r.push(t4.slice(0, n + 1)), dt(e2[0]) && (r[0] += "/"), e2[0] = t4.slice(n + 2));
  } else
    "/" === e2[0][0] && r.push("");
  const o = e2.reduce((t4, n) => n ? t4.concat(n.split("/")) : t4, []);
  for (let n = 0; n < o.length; n++) {
    const t4 = o[n];
    ".." === t4 && r.length > 0 && ".." !== r[r.length - 1] ? r.pop() : (!t4 && n === o.length - 1 || t4 && ("." !== t4 || 0 === r.length)) && r.push(t4);
  }
  return r.join("/");
}
function X(t3, n = false) {
  if (null == t3 || Z(t3) || tt(t3))
    return null;
  let e2 = t3.indexOf("://");
  if (-1 === e2 && at(t3))
    e2 = 2;
  else {
    if (-1 === e2)
      return null;
    e2 += 3;
  }
  const r = t3.indexOf("/", e2);
  return -1 !== r && (t3 = t3.slice(0, r)), n && (t3 = wt(t3, true)), t3;
}
function Y(t3) {
  return at(t3) || pt(t3);
}
function Z(t3) {
  return null != t3 && "blob:" === t3.slice(0, 5);
}
function tt(t3) {
  return null != t3 && "data:" === t3.slice(0, 5);
}
function nt(t3) {
  const n = ot(t3);
  return n && n.isBase64 ? t2(n.data) : null;
}
function et(t3) {
  return btoa(String.fromCharCode.apply(null, t3)).replaceAll("+", "-").replaceAll("/", "_").replace(/=+$/, "");
}
var rt = /^data:(.*?)(;base64)?,(.*)$/;
function ot(t3) {
  const n = t3.match(rt);
  if (!n)
    return null;
  const [, e2, r, o] = n;
  return { mediaType: e2, isBase64: !!r, data: o };
}
function it(t3) {
  return t3.isBase64 ? `data:${t3.mediaType};base64,${t3.data}` : `data:${t3.mediaType},${t3.data}`;
}
function st(t3) {
  const n = nt(t3);
  if (!n)
    return null;
  const e2 = ot(t3);
  return new Blob([n], { type: e2.mediaType });
}
function lt(t3, n) {
  ft(t3, n);
}
function ft(t3, n) {
  if (!t3)
    return false;
  const e2 = document.createElement("a");
  if (!("download" in e2))
    return false;
  const r = URL.createObjectURL(t3);
  return e2.download = n, e2.href = r, e2.style.display = "none", document.body.appendChild(e2), e2.click(), document.body.removeChild(e2), URL.revokeObjectURL(r), true;
}
function at(t3) {
  return null != t3 && "/" === t3[0] && "/" === t3[1];
}
function pt(t3) {
  return null != t3 && f.test(t3);
}
function ht(t3) {
  return null != t3 && p2.test(t3) || "https" === O.scheme && at(t3);
}
function mt(t3) {
  return null != t3 && a2.test(t3) || "http" === O.scheme && at(t3);
}
function dt(t3) {
  return null != t3 && h.test(t3);
}
function yt(t3) {
  return at(t3) ? `https:${t3}` : t3.replace(a2, "https:");
}
function $t() {
  return "http" === O.scheme;
}
function xt() {
  return "https" === O.scheme;
}
function wt(t3, n = false) {
  return at(t3) ? t3.slice(2) : (t3 = t3.replace(f, ""), n && t3.length > 1 && "/" === t3[0] && "/" === t3[1] && (t3 = t3.slice(2)), t3);
}
function Ot(t3) {
  const n = t3.indexOf("//"), e2 = t3.indexOf("/", n + 2);
  return -1 === e2 ? t3 : t3.slice(0, e2);
}
function Ut(t3) {
  let n = 0;
  if (Y(t3)) {
    const e3 = t3.indexOf("//");
    -1 !== e3 && (n = e3 + 2);
  }
  const e2 = t3.lastIndexOf("/");
  return e2 < n ? t3 : t3.slice(0, e2 + 1);
}
function Ct(t3, n) {
  if (!t3)
    return "";
  const e2 = L(t3).path.replace(/\/+$/, ""), r = e2.substring(e2.lastIndexOf("/") + 1);
  if (!(n == null ? void 0 : n.length))
    return r;
  const o = new RegExp(`.(${n.join("|")})$`, "ig");
  return r.replace(o, "");
}
function Rt(t3) {
  return t3 && "/" === t3[t3.length - 1] ? t3 : `${t3}/`;
}
function bt(t3) {
  return t3.replace(/\/+$/, "");
}
function qt(t3) {
  if (/^https?:\/\//i.test(t3)) {
    const n = E(t3);
    t3 = (t3 = n.path.replaceAll(/\/{2,}/g, "/")).replace("/", "//"), n.query && (t3 += `?${n.query}`);
  }
  return t3;
}
function jt(t3) {
  return t3.replace(/^(https?:\/\/)(arcgis\.com)/i, "$1www.$2");
}
function Lt(t3) {
  const n = l.httpsDomains;
  if (!mt(t3))
    return t3;
  const e2 = t3.indexOf("/", 7);
  let r;
  if (r = -1 === e2 ? t3 : t3.slice(0, e2), r = r.toLowerCase().slice(7), m.test(r)) {
    if (!r.endsWith(":80"))
      return t3;
    r = r.slice(0, -3), t3 = t3.replace(":80", "");
  }
  return $t() && r === O.authority && !d.test(t3) || (xt() && r === O.authority || n && n.some((t4) => r === t4 || r.endsWith(`.${t4}`)) || xt() && !J(t3)) && (t3 = yt(t3)), t3;
}
function It(t3, n, e2) {
  if (!(n && e2 && t3 && Y(t3)))
    return t3;
  const r = t3.indexOf("//"), o = t3.indexOf("/", r + 2), i = t3.indexOf(":", r + 2), s5 = Math.min(o < 0 ? t3.length : o, i < 0 ? t3.length : i);
  if (t3.slice(r + 2, s5).toLowerCase() !== n.toLowerCase())
    return t3;
  return `${t3.slice(0, r + 2)}${e2}${t3.slice(s5)}`;
}
function At(t3) {
  return "string" == typeof t3 ? new $(_(t3)) : (t3.scheme || (t3.scheme = O.scheme), t3);
}
function vt(t3) {
  return Tt.test(t3);
}
function Pt(t3, n) {
  const e2 = L(t3), r = Object.keys(e2.query || {});
  return r.length > 0 && n && n.warn("removeQueryParameters()", `Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`), e2.path;
}
function St(t3, n, e2) {
  const r = L(t3), o = r.query || {};
  return o[n] = String(e2), `${r.path}?${v(o)}`;
}
function kt(t3, n) {
  const e2 = L(t3), r = e2.query || {};
  for (const i in n)
    r[i] = n[i];
  const o = v(r);
  return o ? `${e2.path}?${o}` : e2.path;
}
function Bt(t3) {
  if (null == t3)
    return null;
  const n = t3.match(Nt);
  return n ? n[2] : null;
}
function Ht(t3) {
  if (null == t3)
    return null;
  const n = t3.match(Nt);
  return n ? { path: n[1], extension: n[2] } : { path: t3, extension: null };
}
async function Jt(t3) {
  if ("string" == typeof t3) {
    return ot(t3) ?? { data: t3 };
  }
  return new Promise((n, e2) => {
    const r = new FileReader();
    r.readAsDataURL(t3), r.onload = () => n(ot(r.result)), r.onerror = (t4) => e2(t4);
  });
}
var Nt = /([^.]*)\.([^\/]*)$/;
var Tt = /(^data:image\/svg|\.svg$)/i;

export {
  a,
  t,
  t2,
  $,
  R2 as R,
  b,
  L,
  I,
  v,
  P,
  S,
  H,
  J,
  N,
  W,
  D,
  F,
  M,
  _,
  G,
  K,
  V,
  X,
  Y,
  Z,
  tt,
  nt,
  et,
  ot,
  it,
  st,
  lt,
  at,
  ht,
  yt,
  Ut,
  Ct,
  bt,
  It,
  vt,
  Pt,
  St,
  kt,
  Bt,
  Ht,
  Jt
};
//# sourceMappingURL=chunk-O3CHVGVF.js.map
