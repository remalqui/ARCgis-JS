import {
  F,
  c,
  c2,
  i,
  k
} from "./chunk-QA4FMJA6.js";
import {
  M,
  Se,
  W,
  w
} from "./chunk-7KM4XBUC.js";

// node_modules/@arcgis/core/support/popupUtils.js
function p({ displayField: t, editFieldsInfo: n, fields: i2, objectIdField: o, title: r }, s) {
  if (!i2)
    return null;
  const l = w2({ editFieldsInfo: n, fields: i2, objectIdField: o }, s);
  if (!l.length)
    return null;
  const a = C({ titleBase: r, fields: i2, displayField: t }), p2 = j();
  return new k({ title: a, content: p2, fieldInfos: l });
}
var c3 = (e, t) => t.visibleFieldNames ? t.visibleFieldNames.has(e.name) : W(e, t);
function d(e, t) {
  const n = e;
  return t && (e = e.filter((e2) => !t.includes(e2.type))), e === n && (e = e.slice()), e.sort(f), e;
}
function f(e, t) {
  return "oid" === e.type ? -1 : "oid" === t.type ? 1 : I(e) ? -1 : I(t) ? 1 : (e.alias || e.name).toLocaleLowerCase().localeCompare((t.alias || t.name).toLocaleLowerCase());
}
function w2(e, n) {
  const i2 = n == null ? void 0 : n.visibleFieldNames;
  return d(e.fields ?? [], (n == null ? void 0 : n.ignoreFieldTypes) || h).map((n2) => new c({ fieldName: n2.name, isEditable: M(n2, e), label: n2.alias, format: g(n2), visible: c3(n2, { ...e, visibleFieldNames: i2 }) }));
}
function g(e) {
  switch (e.type) {
    case "small-integer":
    case "integer":
    case "single":
      return new F({ digitSeparator: true, places: 0 });
    case "double":
      return new F({ digitSeparator: true, places: 2 });
    case "date":
      return new F({ dateFormat: "long-month-day-year" });
    default:
      return "string" === e.type && Se(e.name) ? new F({ digitSeparator: true, places: 0 }) : null;
  }
}
function j() {
  return [new c2(), new i()];
}
function C(e) {
  const t = w(e), { titleBase: n } = e;
  return t ? `${n}: {${t.trim()}}` : n ?? "";
}
function I(e) {
  if ("name" === (e.name && e.name.toLowerCase()))
    return true;
  return "name" === (e.alias && e.alias.toLowerCase());
}
var h = ["geometry", "blob", "raster", "guid", "xml"];

export {
  p
};
//# sourceMappingURL=chunk-UCGDNB2P.js.map
