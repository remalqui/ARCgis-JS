import {
  i
} from "./chunk-KTEJJM3A.js";
import {
  F,
  T as T3
} from "./chunk-7KM4XBUC.js";
import {
  s as s4
} from "./chunk-KIEN3CY2.js";
import {
  V
} from "./chunk-4RFFPIT2.js";
import {
  o as o3
} from "./chunk-4H5JODOT.js";
import {
  M,
  Y,
  c,
  c2,
  f,
  m as m2,
  p,
  u,
  v
} from "./chunk-CWQ6Q3PH.js";
import {
  o2,
  r
} from "./chunk-SFV6XLDZ.js";
import {
  s as s3
} from "./chunk-3PLRSFLA.js";
import {
  o,
  s as s2
} from "./chunk-VBD33VNW.js";
import {
  l
} from "./chunk-7A5C2EQ3.js";
import {
  m,
  y3 as y
} from "./chunk-OYBXMT5R.js";
import {
  a2
} from "./chunk-CIDWM2UN.js";
import {
  e
} from "./chunk-PD5Q7TDW.js";
import {
  S,
  T as T2
} from "./chunk-2YSHZRCT.js";
import {
  T
} from "./chunk-HNHXEGH2.js";
import {
  s2 as s
} from "./chunk-W2N7YT6I.js";
import {
  a
} from "./chunk-I5JT24BO.js";

// node_modules/@arcgis/core/popup/ExpressionInfo.js
var s5;
var p2 = s5 = class extends l {
  constructor(r5) {
    super(r5), this.name = null, this.title = null, this.expression = null, this.returnType = null;
  }
  clone() {
    return new s5({ name: this.name, title: this.title, expression: this.expression, returnType: this.returnType });
  }
};
e([y({ type: String, json: { write: true } })], p2.prototype, "name", void 0), e([y({ type: String, json: { write: true } })], p2.prototype, "title", void 0), e([y({ type: String, json: { write: true } })], p2.prototype, "expression", void 0), e([y({ type: ["string", "number"], json: { write: true } })], p2.prototype, "returnType", void 0), p2 = s5 = e([a2("esri.popup.ExpressionInfo")], p2);
var i2 = p2;

// node_modules/@arcgis/core/popup/content/Content.js
var e2 = class extends l {
  constructor(r5) {
    super(r5), this.type = null;
  }
};
e([y({ type: ["attachments", "custom", "fields", "media", "text", "expression", "relationship"], readOnly: true, json: { read: false, write: true } })], e2.prototype, "type", void 0), e2 = e([a2("esri.popup.content.Content")], e2);
var p3 = e2;

// node_modules/@arcgis/core/popup/content/AttachmentsContent.js
var s6;
var p4 = s6 = class extends p3 {
  constructor(t2) {
    super(t2), this.description = null, this.displayType = "auto", this.title = null, this.type = "attachments";
  }
  clone() {
    return new s6({ description: this.description, displayType: this.displayType, title: this.title });
  }
};
e([y({ type: String, json: { write: true } })], p4.prototype, "description", void 0), e([y({ type: ["auto", "preview", "list"], json: { write: true } })], p4.prototype, "displayType", void 0), e([y({ type: String, json: { write: true } })], p4.prototype, "title", void 0), e([y({ type: ["attachments"], readOnly: true, json: { read: false, write: true } })], p4.prototype, "type", void 0), p4 = s6 = e([a2("esri.popup.content.AttachmentsContent")], p4);
var i3 = p4;

// node_modules/@arcgis/core/popup/content/CustomContent.js
var p5;
var c3 = p5 = class extends p3 {
  constructor(o5) {
    super(o5), this.creator = null, this.destroyer = null, this.outFields = null, this.type = "custom";
  }
  clone() {
    return new p5({ creator: this.creator, destroyer: this.destroyer, outFields: Array.isArray(this.outFields) ? a(this.outFields) : null });
  }
};
e([y()], c3.prototype, "creator", void 0), e([y()], c3.prototype, "destroyer", void 0), e([y()], c3.prototype, "outFields", void 0), e([y({ type: ["custom"], readOnly: true })], c3.prototype, "type", void 0), c3 = p5 = e([a2("esri.popup.content.CustomContent")], c3);
var i4 = c3;

// node_modules/@arcgis/core/popup/ElementExpressionInfo.js
var s7;
var p6 = s7 = class extends l {
  constructor(r5) {
    super(r5), this.title = null, this.expression = null, this.returnType = "dictionary";
  }
  clone() {
    return new s7({ title: this.title, expression: this.expression });
  }
};
e([y({ type: String, json: { write: true } })], p6.prototype, "title", void 0), e([y({ type: String, json: { write: true } })], p6.prototype, "expression", void 0), e([y({ type: ["dictionary"], readOnly: true, json: { read: false, write: true } })], p6.prototype, "returnType", void 0), p6 = s7 = e([a2("esri.popup.ElementExpressionInfo")], p6);
var i5 = p6;

// node_modules/@arcgis/core/popup/content/ExpressionContent.js
var p7;
var n = p7 = class extends p3 {
  constructor(o5) {
    super(o5), this.expressionInfo = null, this.type = "expression";
  }
  clone() {
    var _a;
    return new p7({ expressionInfo: (_a = this.expressionInfo) == null ? void 0 : _a.clone() });
  }
};
e([y({ type: i5, json: { write: true } })], n.prototype, "expressionInfo", void 0), e([y({ type: ["expression"], readOnly: true, json: { read: false, write: true } })], n.prototype, "type", void 0), n = p7 = e([a2("esri.popup.content.ExpressionContent")], n);
var i6 = n;

// node_modules/@arcgis/core/popup/support/FieldInfoFormat.js
var j = class extends i(l) {
  constructor(t2) {
    super(t2), this.dateFormat = null, this.digitSeparator = false, this.places = null;
  }
  formatNumber(t2) {
    return c2(t2, u(this));
  }
  formatDate(t2, r5 = false) {
    return this.dateFormat ? f(t2, { ...M(this.dateFormat), ...r5 && m2 }) : this.formatNumber(t2);
  }
  formatDateOnly(t2) {
    const r5 = (this.dateFormat && M(this.dateFormat)) ?? void 0;
    return Y(t2, r5);
  }
  formatTimeOnly(t2) {
    const r5 = (this.dateFormat && M(this.dateFormat)) ?? void 0;
    return p(t2, r5);
  }
  formatTimestamp(t2) {
    const r5 = (this.dateFormat && M(this.dateFormat)) ?? void 0;
    return v(t2, r5);
  }
  formatRasterPixelValue(t2) {
    return t2.includes("-") ? t2 : t2.trim().includes(",") ? this._formatDelimitedString(t2, ",", ", ") : t2.trim().includes(";") ? this._formatDelimitedString(t2, ";", "; ") : t2.trim().includes(" ") ? this._formatDelimitedString(t2, " ", " ") : this.formatNumber(Number(t2));
  }
  _formatDelimitedString(t2, r5, o5) {
    return t2 && r5 && o5 ? t2.trim().split(r5).map((t3) => this.formatNumber(Number(t3))).join(o5) : t2;
  }
};
e([o3(c)], j.prototype, "dateFormat", void 0), e([y({ type: Boolean, json: { write: true } })], j.prototype, "digitSeparator", void 0), e([y({ type: T2, json: { write: true } })], j.prototype, "places", void 0), j = e([a2("esri.popup.support.FieldInfoFormat")], j);
var F2 = j;

// node_modules/@arcgis/core/popup/FieldInfo.js
var a3;
var n2 = a3 = class extends l {
  constructor(t2) {
    super(t2), this.fieldName = null, this.format = null, this.isEditable = true, this.label = null, this.stringFieldOption = "text-box", this.statisticType = null, this.tooltip = null, this.visible = true;
  }
  clone() {
    return new a3({ fieldName: this.fieldName, format: this.format ? a(this.format) : null, isEditable: this.isEditable, label: this.label, stringFieldOption: this.stringFieldOption, statisticType: this.statisticType, tooltip: this.tooltip, visible: this.visible });
  }
};
e([y({ type: String, json: { write: true } })], n2.prototype, "fieldName", void 0), e([y({ type: F2, json: { write: true } })], n2.prototype, "format", void 0), e([y({ type: Boolean, json: { write: { alwaysWriteDefaults: true }, default: true } })], n2.prototype, "isEditable", void 0), e([y({ type: String, json: { write: true } })], n2.prototype, "label", void 0), e([o3(new s2({ richtext: "rich-text", textarea: "text-area", textbox: "text-box" }), { default: "text-box" })], n2.prototype, "stringFieldOption", void 0), e([y({ type: ["count", "sum", "min", "max", "avg", "stddev", "var"], json: { write: true } })], n2.prototype, "statisticType", void 0), e([y({ type: String, json: { write: true } })], n2.prototype, "tooltip", void 0), e([y({ type: Boolean, json: { write: true } })], n2.prototype, "visible", void 0), n2 = a3 = e([a2("esri.popup.FieldInfo")], n2);
var c4 = n2;

// node_modules/@arcgis/core/popup/content/FieldsContent.js
var n3;
var l2 = n3 = class extends p3 {
  constructor(t2) {
    super(t2), this.attributes = null, this.description = null, this.fieldInfos = null, this.title = null, this.type = "fields";
  }
  writeFieldInfos(t2, o5) {
    o5.fieldInfos = t2 && t2.map((t3) => t3.toJSON());
  }
  clone() {
    return new n3(a({ attributes: this.attributes, description: this.description, fieldInfos: this.fieldInfos, title: this.title }));
  }
};
e([y({ type: Object, json: { write: true } })], l2.prototype, "attributes", void 0), e([y({ type: String, json: { write: true } })], l2.prototype, "description", void 0), e([y({ type: [c4] })], l2.prototype, "fieldInfos", void 0), e([r("fieldInfos")], l2.prototype, "writeFieldInfos", null), e([y({ type: String, json: { write: true } })], l2.prototype, "title", void 0), e([y({ type: ["fields"], readOnly: true, json: { read: false, write: true } })], l2.prototype, "type", void 0), l2 = n3 = e([a2("esri.popup.content.FieldsContent")], l2);
var c5 = l2;

// node_modules/@arcgis/core/popup/content/mixins/MediaInfo.js
var s8 = class extends l {
  constructor(t2) {
    super(t2), this.altText = null, this.caption = "", this.title = "", this.type = null;
  }
};
e([y({ type: String, json: { write: true } })], s8.prototype, "altText", void 0), e([y({ type: String, json: { write: true } })], s8.prototype, "caption", void 0), e([y({ type: String, json: { write: true } })], s8.prototype, "title", void 0), e([y({ type: ["image", "bar-chart", "column-chart", "line-chart", "pie-chart"], readOnly: true, json: { read: false, write: true } })], s8.prototype, "type", void 0), s8 = e([a2("esri.popup.content.mixins.MediaInfo")], s8);
var p8 = s8;

// node_modules/@arcgis/core/popup/content/support/ChartMediaInfoValueSeries.js
var s9;
var p9 = s9 = class extends m {
  constructor(o5) {
    super(o5), this.fieldName = null, this.tooltip = null, this.value = null;
  }
  clone() {
    return new s9({ fieldName: this.fieldName, tooltip: this.tooltip, value: this.value });
  }
};
e([y()], p9.prototype, "fieldName", void 0), e([y()], p9.prototype, "tooltip", void 0), e([y()], p9.prototype, "value", void 0), p9 = s9 = e([a2("esri.popup.content.support.ChartMediaInfoValueSeries")], p9);
var i7 = p9;

// node_modules/@arcgis/core/popup/content/support/ChartMediaInfoValue.js
var p10;
var l3 = p10 = class extends l {
  constructor(o5) {
    super(o5), this.fields = [], this.normalizeField = null, this.series = [], this.tooltipField = null;
  }
  clone() {
    return new p10({ fields: a(this.fields), normalizeField: this.normalizeField, tooltipField: this.tooltipField });
  }
};
e([y({ type: [String], json: { write: true } })], l3.prototype, "fields", void 0), e([y({ type: String, json: { write: true } })], l3.prototype, "normalizeField", void 0), e([y({ type: [i7], json: { read: false } })], l3.prototype, "series", void 0), e([y({ type: String, json: { write: true } })], l3.prototype, "tooltipField", void 0), l3 = p10 = e([a2("esri.popup.content.support.ChartMediaInfoValue")], l3);
var n4 = l3;

// node_modules/@arcgis/core/popup/content/mixins/ChartMediaInfo.js
var p11 = class extends p8 {
  constructor(r5) {
    super(r5), this.type = null, this.value = null;
  }
};
e([y({ type: ["bar-chart", "column-chart", "line-chart", "pie-chart"], readOnly: true, json: { read: false, write: true } })], p11.prototype, "type", void 0), e([y({ type: n4, json: { write: true } })], p11.prototype, "value", void 0), p11 = e([a2("esri.popup.content.mixins.ChartMediaInfo")], p11);
var a4 = p11;

// node_modules/@arcgis/core/popup/content/support/chartMediaInfoUtils.js
var c6 = o()({ barchart: "bar-chart", columnchart: "column-chart", linechart: "line-chart", piechart: "pie-chart" });

// node_modules/@arcgis/core/popup/content/BarChartMediaInfo.js
var a5;
var p12 = a5 = class extends a4 {
  constructor(t2) {
    super(t2), this.type = "bar-chart";
  }
  clone() {
    return new a5({ altText: this.altText, title: this.title, caption: this.caption, value: this.value ? this.value.clone() : null });
  }
};
e([y({ type: ["bar-chart"], readOnly: true, json: { type: ["barchart"], read: false, write: c6.write } })], p12.prototype, "type", void 0), p12 = a5 = e([a2("esri.popup.content.BarChartMediaInfo")], p12);
var i8 = p12;

// node_modules/@arcgis/core/popup/content/ColumnChartMediaInfo.js
var a6;
var p13 = a6 = class extends a4 {
  constructor(t2) {
    super(t2), this.type = "column-chart";
  }
  clone() {
    return new a6({ altText: this.altText, title: this.title, caption: this.caption, value: this.value ? this.value.clone() : null });
  }
};
e([y({ type: ["column-chart"], readOnly: true, json: { type: ["columnchart"], read: false, write: c6.write } })], p13.prototype, "type", void 0), p13 = a6 = e([a2("esri.popup.content.ColumnChartMediaInfo")], p13);
var c7 = p13;

// node_modules/@arcgis/core/popup/content/support/ImageMediaInfoValue.js
var e3;
var p14 = e3 = class extends l {
  constructor(r5) {
    super(r5), this.linkURL = null, this.sourceURL = null;
  }
  clone() {
    return new e3({ linkURL: this.linkURL, sourceURL: this.sourceURL });
  }
};
e([y({ type: String, json: { write: true } })], p14.prototype, "linkURL", void 0), e([y({ type: String, json: { write: true } })], p14.prototype, "sourceURL", void 0), p14 = e3 = e([a2("esri.popup.content.support.ImageMediaInfoValue")], p14);
var c8 = p14;

// node_modules/@arcgis/core/popup/content/ImageMediaInfo.js
var a7;
var i9 = a7 = class extends p8 {
  constructor(e6) {
    super(e6), this.refreshInterval = null, this.type = "image", this.value = null;
  }
  clone() {
    return new a7({ altText: this.altText, title: this.title, caption: this.caption, refreshInterval: this.refreshInterval, value: this.value ? this.value.clone() : null });
  }
};
e([y({ type: Number, json: { write: true } })], i9.prototype, "refreshInterval", void 0), e([y({ type: ["image"], readOnly: true, json: { read: false, write: true } })], i9.prototype, "type", void 0), e([y({ type: c8, json: { write: true } })], i9.prototype, "value", void 0), i9 = a7 = e([a2("esri.popup.content.ImageMediaInfo")], i9);
var p15 = i9;

// node_modules/@arcgis/core/popup/content/LineChartMediaInfo.js
var i10;
var a8 = i10 = class extends a4 {
  constructor(t2) {
    super(t2), this.type = "line-chart";
  }
  clone() {
    return new i10({ altText: this.altText, title: this.title, caption: this.caption, value: this.value ? this.value.clone() : null });
  }
};
e([y({ type: ["line-chart"], readOnly: true, json: { type: ["linechart"], read: false, write: c6.write } })], a8.prototype, "type", void 0), a8 = i10 = e([a2("esri.popup.content.LineChartMediaInfo")], a8);
var p16 = a8;

// node_modules/@arcgis/core/popup/content/PieChartMediaInfo.js
var p17;
var i11 = p17 = class extends a4 {
  constructor(t2) {
    super(t2), this.type = "pie-chart";
  }
  clone() {
    return new p17({ altText: this.altText, title: this.title, caption: this.caption, value: this.value ? this.value.clone() : null });
  }
};
e([y({ type: ["pie-chart"], readOnly: true, json: { type: ["piechart"], read: false, write: c6.write } })], i11.prototype, "type", void 0), i11 = p17 = e([a2("esri.popup.content.PieChartMediaInfo")], i11);
var a9 = i11;

// node_modules/@arcgis/core/popup/content/support/mediaInfoTypes.js
var m3 = { base: p8, key: "type", defaultKeyValue: "image", typeMap: { "bar-chart": i8, "column-chart": c7, "line-chart": p16, "pie-chart": a9, image: p15 } };

// node_modules/@arcgis/core/popup/content/MediaContent.js
var l4;
var u2 = l4 = class extends p3 {
  constructor(t2) {
    super(t2), this.activeMediaInfoIndex = null, this.attributes = null, this.description = null, this.mediaInfos = null, this.title = null, this.type = "media";
  }
  readMediaInfos(t2) {
    return t2 && t2.map((t3) => "image" === t3.type ? p15.fromJSON(t3) : "barchart" === t3.type ? i8.fromJSON(t3) : "columnchart" === t3.type ? c7.fromJSON(t3) : "linechart" === t3.type ? p16.fromJSON(t3) : "piechart" === t3.type ? a9.fromJSON(t3) : void 0).filter(Boolean);
  }
  writeMediaInfos(t2, o5) {
    o5.mediaInfos = t2 && t2.map((t3) => t3.toJSON());
  }
  clone() {
    return new l4(a({ activeMediaInfoIndex: this.activeMediaInfoIndex, attributes: this.attributes, description: this.description, mediaInfos: this.mediaInfos, title: this.title }));
  }
};
e([y()], u2.prototype, "activeMediaInfoIndex", void 0), e([y({ type: Object, json: { write: true } })], u2.prototype, "attributes", void 0), e([y({ type: String, json: { write: true } })], u2.prototype, "description", void 0), e([y({ types: [m3] })], u2.prototype, "mediaInfos", void 0), e([o2("mediaInfos")], u2.prototype, "readMediaInfos", null), e([r("mediaInfos")], u2.prototype, "writeMediaInfos", null), e([y({ type: String, json: { write: true } })], u2.prototype, "title", void 0), e([y({ type: ["media"], readOnly: true, json: { read: false, write: true } })], u2.prototype, "type", void 0), u2 = l4 = e([a2("esri.popup.content.MediaContent")], u2);
var I = u2;

// node_modules/@arcgis/core/popup/support/RelatedRecordsInfoFieldOrder.js
var t;
var p18 = t = class extends l {
  constructor(r5) {
    super(r5), this.field = null, this.order = null;
  }
  clone() {
    return new t({ field: this.field, order: this.order });
  }
};
e([y({ type: String, json: { write: true } })], p18.prototype, "field", void 0), e([y({ type: ["asc", "desc"], json: { write: true } })], p18.prototype, "order", void 0), p18 = t = e([a2("esri.popup.support.RelatedRecordsInfoFieldOrder")], p18);
var c9 = p18;

// node_modules/@arcgis/core/popup/content/RelationshipContent.js
var n5 = class extends i(p3) {
  constructor(t2) {
    super(t2), this.description = null, this.displayCount = null, this.displayType = "list", this.orderByFields = null, this.relationshipId = null, this.title = null, this.type = "relationship";
  }
};
e([y({ type: String, json: { write: true } })], n5.prototype, "description", void 0), e([y({ type: Number, json: { type: T2, write: true } })], n5.prototype, "displayCount", void 0), e([y({ type: ["list"], json: { write: true } })], n5.prototype, "displayType", void 0), e([y({ type: [c9], json: { write: true } })], n5.prototype, "orderByFields", void 0), e([y({ type: Number, json: { type: T2, write: true } })], n5.prototype, "relationshipId", void 0), e([y({ type: String, json: { write: true } })], n5.prototype, "title", void 0), e([y({ type: ["relationship"], readOnly: true, json: { read: false, write: true } })], n5.prototype, "type", void 0), n5 = e([a2("esri.popup.content.RelationshipContent")], n5);
var l5 = n5;

// node_modules/@arcgis/core/popup/content/TextContent.js
var s10;
var p19 = s10 = class extends p3 {
  constructor(t2) {
    super(t2), this.text = null, this.type = "text";
  }
  clone() {
    return new s10({ text: this.text });
  }
};
e([y({ type: String, json: { write: true } })], p19.prototype, "text", void 0), e([y({ type: ["text"], readOnly: true, json: { read: false, write: true } })], p19.prototype, "type", void 0), p19 = s10 = e([a2("esri.popup.content.TextContent")], p19);
var c10 = p19;

// node_modules/@arcgis/core/popup/content.js
var p20 = { base: null, key: "type", typeMap: { attachment: i3, media: I, text: c10, expression: i6, field: c5, relationship: l5 } };

// node_modules/@arcgis/core/popup/LayerOptions.js
var e4;
var p21 = e4 = class extends l {
  constructor(o5) {
    super(o5), this.returnTopmostRaster = null, this.showNoDataRecords = null;
  }
  clone() {
    return new e4({ showNoDataRecords: this.showNoDataRecords, returnTopmostRaster: this.returnTopmostRaster });
  }
};
e([y({ type: Boolean, json: { write: true } })], p21.prototype, "returnTopmostRaster", void 0), e([y({ type: Boolean, json: { write: true } })], p21.prototype, "showNoDataRecords", void 0), p21 = e4 = e([a2("esri.popup.LayerOptions")], p21);
var a10 = p21;

// node_modules/@arcgis/core/popup/RelatedRecordsInfo.js
var d;
var c11 = d = class extends l {
  constructor(o5) {
    super(o5), this.showRelatedRecords = null, this.orderByFields = null;
  }
  clone() {
    return new d({ showRelatedRecords: this.showRelatedRecords, orderByFields: this.orderByFields ? a(this.orderByFields) : null });
  }
};
e([y({ type: Boolean, json: { write: true } })], c11.prototype, "showRelatedRecords", void 0), e([y({ type: [c9], json: { write: true } })], c11.prototype, "orderByFields", void 0), c11 = d = e([a2("esri.popup.RelatedRecordsInfo")], c11);
var l6 = c11;

// node_modules/@arcgis/core/support/actions/ActionBase.js
var r2;
var c12 = r2 = class extends s4(m) {
  constructor(t2) {
    super(t2), this.active = false, this.className = null, this.disabled = false, this.icon = null, this.id = null, this.indicator = false, this.title = null, this.type = null, this.visible = true;
  }
  clone() {
    return new r2({ active: this.active, className: this.className, disabled: this.disabled, icon: this.icon, id: this.id, indicator: this.indicator, title: this.title, visible: this.visible });
  }
};
e([y()], c12.prototype, "active", void 0), e([y()], c12.prototype, "className", void 0), e([y()], c12.prototype, "disabled", void 0), e([y()], c12.prototype, "icon", void 0), e([y()], c12.prototype, "id", void 0), e([y()], c12.prototype, "indicator", void 0), e([y()], c12.prototype, "title", void 0), e([y()], c12.prototype, "type", void 0), e([y()], c12.prototype, "visible", void 0), c12 = r2 = e([a2("esri.support.actions.ActionBase")], c12);
var p22 = c12;

// node_modules/@arcgis/core/support/actions/ActionButton.js
var r3;
var e5 = r3 = class extends p22 {
  constructor(s11) {
    super(s11), this.image = null, this.type = "button";
  }
  clone() {
    return new r3({ active: this.active, className: this.className, disabled: this.disabled, icon: this.icon, id: this.id, indicator: this.indicator, title: this.title, visible: this.visible, image: this.image });
  }
};
e([y()], e5.prototype, "image", void 0), e5 = r3 = e([a2("esri.support.Action.ActionButton")], e5);
var c13 = e5;

// node_modules/@arcgis/core/support/actions/ActionToggle.js
var o4;
var r4 = o4 = class extends p22 {
  constructor(s11) {
    super(s11), this.image = null, this.type = "toggle", this.value = false;
  }
  clone() {
    return new o4({ active: this.active, className: this.className, disabled: this.disabled, icon: this.icon, id: this.id, indicator: this.indicator, title: this.title, visible: this.visible, image: this.image, value: this.value });
  }
};
e([y()], r4.prototype, "image", void 0), e([y()], r4.prototype, "value", void 0), r4 = o4 = e([a2("esri.support.Action.ActionToggle")], r4);
var a11 = r4;

// node_modules/@arcgis/core/PopupTemplate.js
var T4 = "esri.PopupTemplate";
var b = s.getLogger(T4);
var J = "relationships/";
var L = "expression/";
var B = V.ofType({ key: "type", defaultKeyValue: "button", base: p22, typeMap: { button: c13, toggle: a11 } });
var M2 = { base: p3, key: "type", typeMap: { media: I, custom: i4, text: c10, attachments: i3, fields: c5, expression: i6, relationship: l5 } };
var P = ["attachments", "fields", "media", "text", "expression", "relationship"];
var $ = class extends i(l) {
  constructor() {
    super(...arguments), this.actions = null, this.content = "", this.expressionInfos = null, this.fieldInfos = null, this.layerOptions = null, this.lastEditInfoEnabled = true, this.outFields = null, this.overwriteActions = false, this.returnGeometry = false, this.title = "";
  }
  castContent(t2) {
    return Array.isArray(t2) ? t2.map((t3) => S(M2, t3)) : "string" == typeof t2 || "function" == typeof t2 || t2 instanceof HTMLElement || T(t2) ? t2 : (b.error("content error", "unsupported content value", { value: t2 }), null);
  }
  readContent(t2, e6) {
    const { popupElements: o5 } = e6;
    return Array.isArray(o5) && o5.length > 0 ? this._readPopupInfoElements(e6.description, e6.mediaInfos, o5) : this._readPopupInfo(e6);
  }
  writeContent(t2, e6, o5, s11) {
    "string" != typeof t2 ? Array.isArray(t2) && (e6.popupElements = t2.filter((t3) => P.includes(t3.type)).map((t3) => t3 && t3.toJSON(s11)), e6.popupElements.forEach((t3) => {
      "attachments" === t3.type ? this._writeAttachmentContent(e6) : "media" === t3.type ? this._writeMediaContent(t3, e6) : "text" === t3.type ? this._writeTextContent(t3, e6) : "relationship" === t3.type && this._writeRelationshipContent(t3, e6);
    })) : e6.description = t2;
  }
  writeFieldInfos(t2, e6, o5, s11) {
    const { content: r5 } = this, i12 = Array.isArray(r5) ? r5 : null;
    if (t2) {
      const o6 = i12 ? i12.filter((t3) => "fields" === t3.type) : [], r6 = o6.length && o6.every((t3) => {
        var _a;
        return (_a = t3.fieldInfos) == null ? void 0 : _a.length;
      });
      e6.fieldInfos = t2.filter(Boolean).map((t3) => {
        const e7 = t3.toJSON(s11);
        return r6 && (e7.visible = false), e7;
      });
    }
    if (i12)
      for (const n6 of i12)
        "fields" === n6.type && this._writeFieldsContent(n6, e6);
  }
  writeLayerOptions(t2, e6, o5, s11) {
    e6[o5] = !t2 || null === t2.showNoDataRecords && null === t2.returnTopmostRaster ? null : t2.toJSON(s11);
  }
  writeTitle(t2, e6) {
    e6.title = t2 || "";
  }
  async collectRequiredFields(t2, e6) {
    const o5 = this.expressionInfos || [];
    await this._collectExpressionInfoFields(t2, e6, [...o5, ...this._getContentExpressionInfos(this.content, o5)]), F(t2, e6, [...this.outFields || [], ...this._getActionsFields(this.actions), ...this._getTitleFields(this.title), ...this._getContentFields(this.content)]);
  }
  async getRequiredFields(t2) {
    const e6 = /* @__PURE__ */ new Set();
    return await this.collectRequiredFields(e6, t2), [...e6].sort();
  }
  _writeFieldsContent(t2, e6) {
    if (!Array.isArray(t2.fieldInfos) || !t2.fieldInfos.length)
      return;
    const o5 = a(t2.fieldInfos);
    Array.isArray(e6.fieldInfos) ? o5.forEach((t3) => {
      const o6 = e6.fieldInfos.find((e7) => e7.fieldName.toLowerCase() === t3.fieldName.toLowerCase());
      o6 ? o6.visible = true : e6.fieldInfos.push(t3);
    }) : e6.fieldInfos = o5;
  }
  _writeAttachmentContent(t2) {
    t2.showAttachments || (t2.showAttachments = true);
  }
  _writeRelationshipContent(t2, e6) {
    var _a, _b;
    const o5 = ((_a = t2.orderByFields) == null ? void 0 : _a.map((e7) => this._toFieldOrderJSON(e7, t2.relationshipId))) || [], s11 = [...((_b = e6.relatedRecordsInfo) == null ? void 0 : _b.orderByFields) || [], ...o5];
    e6.relatedRecordsInfo = { showRelatedRecords: true, ...(s11 == null ? void 0 : s11.length) && { orderByFields: s11 } };
  }
  _writeTextContent(t2, e6) {
    !e6.description && t2.text && (e6.description = t2.text);
  }
  _writeMediaContent(t2, e6) {
    if (!Array.isArray(t2.mediaInfos) || !t2.mediaInfos.length)
      return;
    const o5 = a(t2.mediaInfos);
    Array.isArray(e6.mediaInfos) ? e6.mediaInfos = [...e6.mediaInfos, ...o5] : e6.mediaInfos = o5;
  }
  _readPopupInfoElements(t2, e6, o5) {
    const s11 = { description: false, mediaInfos: false };
    return o5.map((o6) => "media" === o6.type ? (o6.mediaInfos || !e6 || s11.mediaInfos || (o6.mediaInfos = e6, s11.mediaInfos = true), I.fromJSON(o6)) : "text" === o6.type ? (o6.text || !t2 || s11.description || (o6.text = t2, s11.description = true), c10.fromJSON(o6)) : "attachments" === o6.type ? i3.fromJSON(o6) : "fields" === o6.type ? c5.fromJSON(o6) : "expression" === o6.type ? i6.fromJSON(o6) : "relationship" === o6.type ? l5.fromJSON(o6) : void 0).filter(Boolean);
  }
  _toRelationshipContent(t2) {
    const { field: e6, order: o5 } = t2;
    if (!(e6 == null ? void 0 : e6.startsWith(J)))
      return null;
    const s11 = e6.replace(J, "").split("/");
    if (2 !== s11.length)
      return null;
    const r5 = parseInt(s11[0], 10), i12 = s11[1];
    return "number" == typeof r5 && i12 ? l5.fromJSON({ relationshipId: r5, orderByFields: [{ field: i12, order: o5 }] }) : null;
  }
  _toFieldOrderJSON(t2, e6) {
    const { order: o5, field: s11 } = t2;
    return { field: `${J}${e6}/${s11}`, order: o5 };
  }
  _readPopupInfo({ description: t2, mediaInfos: e6, showAttachments: o5, relatedRecordsInfo: s11 = { showRelatedRecords: false } }) {
    const r5 = [];
    t2 ? r5.push(new c10({ text: t2 })) : r5.push(new c5()), Array.isArray(e6) && e6.length && r5.push(I.fromJSON({ mediaInfos: e6 })), o5 && r5.push(i3.fromJSON({ displayType: "auto" }));
    const { showRelatedRecords: i12, orderByFields: n6 } = s11;
    return i12 && (n6 == null ? void 0 : n6.length) && n6.forEach((t3) => {
      const e7 = this._toRelationshipContent(t3);
      e7 && r5.push(e7);
    }), r5.length ? r5 : t2;
  }
  _getContentElementFields(t2) {
    const e6 = t2 == null ? void 0 : t2.type;
    if ("attachments" === e6)
      return [...this._extractFieldNames(t2.title), ...this._extractFieldNames(t2.description)];
    if ("custom" === e6)
      return t2.outFields || [];
    if ("fields" === e6)
      return [...this._extractFieldNames(t2.title), ...this._extractFieldNames(t2.description), ...this._getFieldInfoFields(t2.fieldInfos ?? this.fieldInfos)];
    if ("media" === e6) {
      const e7 = t2.mediaInfos || [];
      return [...this._extractFieldNames(t2.title), ...this._extractFieldNames(t2.description), ...e7.reduce((t3, e8) => [...t3, ...this._getMediaInfoFields(e8)], [])];
    }
    return "text" === e6 ? this._extractFieldNames(t2.text) : [];
  }
  _getMediaInfoFields(t2) {
    const { caption: e6, title: o5, value: s11 } = t2, r5 = s11 || {}, { fields: i12, normalizeField: n6, tooltipField: p23, sourceURL: l7, linkURL: a12 } = r5, d2 = [...this._extractFieldNames(o5), ...this._extractFieldNames(e6), ...this._extractFieldNames(l7), ...this._extractFieldNames(a12), ...i12 ?? []];
    return n6 && d2.push(n6), p23 && d2.push(p23), d2;
  }
  _getContentExpressionInfos(t2, e6) {
    return Array.isArray(t2) ? t2.reduce((t3, e7) => [...t3, ..."expression" === e7.type && e7.expressionInfo ? [e7.expressionInfo] : []], e6) : [];
  }
  _getContentFields(t2) {
    return "string" == typeof t2 ? this._extractFieldNames(t2) : Array.isArray(t2) ? t2.reduce((t3, e6) => [...t3, ...this._getContentElementFields(e6)], []) : [];
  }
  async _collectExpressionInfoFields(t2, e6, o5) {
    o5 && await Promise.all(o5.map((o6) => T3(t2, e6, o6.expression)));
  }
  _getFieldInfoFields(t2) {
    return t2 ? t2.filter((t3) => void 0 === t3.visible || !!t3.visible).map((t3) => t3.fieldName).filter((t3) => !t3.startsWith(J) && !t3.startsWith(L)) : [];
  }
  _getActionsFields(t2) {
    return t2 ? t2.toArray().reduce((t3, e6) => [...t3, ...this._getActionFields(e6)], []) : [];
  }
  _getActionFields(t2) {
    const { className: e6, title: o5, type: s11 } = t2, r5 = "button" === s11 || "toggle" === s11 ? t2.image : "";
    return [...this._extractFieldNames(o5), ...this._extractFieldNames(e6), ...this._extractFieldNames(r5)];
  }
  _getTitleFields(t2) {
    return "string" == typeof t2 ? this._extractFieldNames(t2) : [];
  }
  _extractFieldNames(t2) {
    if (!t2 || "string" != typeof t2)
      return [];
    const e6 = /{[^}]*}/g, o5 = t2.match(e6);
    if (!o5)
      return [];
    const s11 = /\{(\w+):.+\}/, r5 = o5.filter((t3) => !(0 === t3.indexOf(`{${J}`) || 0 === t3.indexOf(`{${L}`))).map((t3) => t3.replace(s11, "{$1}"));
    return r5 ? r5.map((t3) => t3.slice(1, -1)) : [];
  }
};
e([y({ type: B })], $.prototype, "actions", void 0), e([y()], $.prototype, "content", void 0), e([s3("content")], $.prototype, "castContent", null), e([o2("content", ["description", "fieldInfos", "popupElements", "mediaInfos", "showAttachments", "relatedRecordsInfo"])], $.prototype, "readContent", null), e([r("content", { popupElements: { type: V.ofType(p20) }, showAttachments: { type: Boolean }, mediaInfos: { type: V.ofType(m3) }, description: { type: String }, relatedRecordsInfo: { type: l6 } })], $.prototype, "writeContent", null), e([y({ type: [i2], json: { write: true } })], $.prototype, "expressionInfos", void 0), e([y({ type: [c4] })], $.prototype, "fieldInfos", void 0), e([r("fieldInfos")], $.prototype, "writeFieldInfos", null), e([y({ type: a10 })], $.prototype, "layerOptions", void 0), e([r("layerOptions")], $.prototype, "writeLayerOptions", null), e([y({ type: Boolean, json: { read: { source: "showLastEditInfo" }, write: { target: "showLastEditInfo" }, default: true } })], $.prototype, "lastEditInfoEnabled", void 0), e([y()], $.prototype, "outFields", void 0), e([y()], $.prototype, "overwriteActions", void 0), e([y()], $.prototype, "returnGeometry", void 0), e([y({ json: { type: String } })], $.prototype, "title", void 0), e([r("title")], $.prototype, "writeTitle", null), $ = e([a2("esri.PopupTemplate")], $);
var k = $;

export {
  i3 as i,
  i5 as i2,
  F2 as F,
  c4 as c,
  c5 as c2,
  i7 as i3,
  I,
  c9 as c3,
  c10 as c4,
  i2 as i4,
  p22 as p,
  c13 as c5,
  a11 as a,
  k
};
//# sourceMappingURL=chunk-QA4FMJA6.js.map
