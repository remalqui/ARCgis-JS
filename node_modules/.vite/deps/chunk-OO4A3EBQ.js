import {
  F,
  G,
  Ht,
  It,
  K,
  R,
  Y,
  _,
  tt
} from "./chunk-O3CHVGVF.js";

// node_modules/@arcgis/core/chunks/persistableUrlUtils.js
function i(t, o) {
  const l = o && o.url && o.url.path;
  if (t && l && (t = _(t, l, { preserveProtocolRelative: true }), o.portalItem && o.readResourcePaths)) {
    const e = G(t, o.portalItem.itemUrl);
    null != e && h.test(e) && o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);
  }
  return I(t, o && o.portal);
}
function c(s, n, a = R2.YES) {
  if (null == s)
    return s;
  !Y(s) && n && n.blockedRelativeUrls && n.blockedRelativeUrls.push(s);
  let u = _(s);
  if (n) {
    const e = n.verifyItemRelativeUrls && n.verifyItemRelativeUrls.rootPath || n.url && n.url.path;
    if (e) {
      const t = I(e, n.portal), o = I(u, n.portal);
      u = G(o, t, t);
      null != u && u !== o && u !== s && n.verifyItemRelativeUrls && n.verifyItemRelativeUrls.writtenUrls.push(u);
    }
  }
  return u = d(u, n == null ? void 0 : n.portal), Y(u) && (u = K(u)), (n == null ? void 0 : n.resources) && (n == null ? void 0 : n.portalItem) && !Y(u) && !tt(u) && a === R2.YES && n.resources.toKeep.push({ resource: n.portalItem.resourceFromPath(u), compress: false }), u;
}
function m(e, r, t) {
  return i(e, t);
}
function p(e, r, t, o) {
  const l = c(e, o);
  void 0 !== l && (r[t] = l);
}
var f = /\/items\/([^\/]+)\/resources\/(.*)/;
var h = /^\.\/resources\//;
function v(e) {
  const r = (e == null ? void 0 : e.match(f)) ?? null;
  return (r == null ? void 0 : r[1]) ?? null;
}
function U(e) {
  const r = (e == null ? void 0 : e.match(f)) ?? null;
  if (null == r)
    return null;
  const t = r[2], o = t.lastIndexOf("/");
  if (-1 === o) {
    const { path: e2, extension: r2 } = Ht(t);
    return { prefix: null, filename: e2, extension: r2 };
  }
  const { path: l, extension: n } = Ht(t.slice(o + 1));
  return { prefix: t.slice(0, o), filename: l, extension: n };
}
function d(e, r) {
  return r && !r.isPortal && r.urlKey && r.customBaseUrl ? It(e, `${r.urlKey}.${r.customBaseUrl}`, r.portalHostname) : e;
}
function I(e, r) {
  if (!r || r.isPortal || !r.urlKey || !r.customBaseUrl)
    return e;
  const t = `${r.urlKey}.${r.customBaseUrl}`, o = R();
  return F(o, `${o.scheme}://${t}`) ? It(e, r.portalHostname, t) : It(e, t, r.portalHostname);
}
var R2;
!function(e) {
  e[e.YES = 0] = "YES", e[e.NO = 1] = "NO";
}(R2 || (R2 = {}));
var y = Object.freeze(Object.defineProperty({ __proto__: null, get MarkKeep() {
  return R2;
}, ensureMainOnlineDomain: d, fromJSON: i, itemIdFromResourceUrl: v, prefixAndFilenameFromResourceUrl: U, read: m, toJSON: c, write: p }, Symbol.toStringTag, { value: "Module" }));

export {
  i,
  c,
  m,
  p,
  v,
  U,
  d,
  R2 as R,
  y
};
//# sourceMappingURL=chunk-OO4A3EBQ.js.map
