{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js", "../../@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js", "../../@arcgis/core/symbols/cim/CIMResourceManager.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{p as t}from\"../../../../../chunks/index2.js\";import{throwIfAborted as e}from\"../../../../../core/promiseUtils.js\";import{Milliseconds as o}from\"../../../../../core/time.js\";async function r(r,n){const i=t(r);if(i instanceof Error)throw i;await i.createImages(),e(n);const{frames:a,width:s,height:p}=i,c=document.createElement(\"canvas\");c.width=s,c.height=p;const l=c.getContext(\"2d\",{willReadFrequently:!0}),m=[],h=[];for(const t of a){h.push(o(t.delay||100));const e=t.imageElement;0===t.blendOp?l.globalCompositeOperation=\"copy\":l.globalCompositeOperation=\"source-over\";const r=2===t.disposeOp?l.getImageData(t.left,t.top,t.width,t.height):void 0;l.drawImage(e,t.left,t.top);const n=l.getImageData(0,0,s,p);m.push(n),0===t.disposeOp||(1===t.disposeOp?l.clearRect(t.left,t.top,t.width,t.height):2===t.disposeOp&&l.putImageData(r,t.left,t.top))}return{frameDurations:h,getFrame:t=>m[t],width:s,height:p}}const n=[137,80,78,71,13,10,26,10];function i(t){const e=new Uint8Array(t);return!n.some(((t,o)=>t!==e[o]))}function a(t){if(!i(t))return!1;const e=new DataView(t),o=new Uint8Array(t);let r,n=8;do{const t=e.getUint32(n);if(r=String.fromCharCode.apply(String,Array.prototype.slice.call(o.subarray(n+4,n+8))),\"acTL\"===r)return!0;n+=12+t}while(\"IEND\"!==r&&n<o.length);return!1}export{a as isAnimatedPNG,i as isPNG,r as parseApng};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t}from\"../../../../../core/time.js\";import{imageTypeToCanvas as e}from\"../../../../../geometry/support/meshUtils/exporters/gltf/imageutils.js\";import{p as i,d as s}from\"../../../../../chunks/index3.js\";async function n(n,a){const r=i(n),o=s(r,!0),{width:c,height:d}=r.lsd,m=document.createElement(\"canvas\");m.width=c,m.height=d;const u=m.getContext(\"2d\",{willReadFrequently:!0}),f=[],h=[];for(const i of o){h.push(t(i.delay||100));const s=new ImageData(i.patch,i.dims.width,i.dims.height),n=e(s),a=3===i.disposalType?u.getImageData(i.dims.left,i.dims.top,i.dims.width,i.dims.height):void 0;u.drawImage(n,i.dims.left,i.dims.top);const r=u.getImageData(0,0,c,d);f.push(r),1===i.disposalType||(2===i.disposalType?u.clearRect(i.dims.left,i.dims.top,i.dims.width,i.dims.height):3===i.disposalType&&u.putImageData(a,i.dims.left,i.dims.top))}return{frameDurations:h,getFrame:t=>f[t],width:c,height:d}}const a=[71,73,70];function r(t){const e=new Uint8Array(t);return!a.some(((t,i)=>t!==e[i]))}function o(t){if(!r(t))return!1;const e=new DataView(t),i=e.getUint8(10);let s=13+(128&i?3*2**(1+(7&i)):0),n=0,a=!1;for(;!a;){switch(e.getUint8(s++)){case 33:if(!o())return!1;break;case 44:c();break;case 59:a=!0;break;default:return!1}if(n>1)return!0}function o(){switch(e.getUint8(s++)){case 249:d();break;case 1:m();break;case 254:u();break;case 255:f();break;default:return!1}return!0}function c(){n++,s+=8;const t=e.getUint8(s++);s+=128&t?3*2**(1+(7&t)):0,s++,h()}function d(){s++,s+=4,h()}function m(){n++,s++,s+=12,h()}function u(){h()}function f(){s++,s+=8,s+=3,h()}function h(){let t;for(;t=e.getUint8(s++);)s+=t}return!1}export{o as isAnimatedGIF,r as isGIF,n as parseGif};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{loadFont as r}from\"../../core/fontUtils.js\";import{isAbortError as i}from\"../../core/promiseUtils.js\";import{base64ToArrayBuffer as s}from\"../../support/base64Utils.js\";import{isAnimatedPNG as o,parseApng as n}from\"../../views/2d/engine/webgl/animatedFormats/apng.js\";import{isAnimatedGIF as a,parseGif as c}from\"../../views/2d/engine/webgl/animatedFormats/gif.js\";class h{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let i=this._inFlightResourceMap.get(e);return i?i.then((e=>({width:e.width,height:e.height}))):(i=l(e,t),this._inFlightResourceMap.set(e,i),i.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return r(e)}}async function u(r,s){const o=window.URL.createObjectURL(r);try{const{data:t}=await e(o,{...s,responseType:\"image\"});return t}catch(n){if(!i(n))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${o}`);throw n}finally{window.URL.revokeObjectURL(o)}}async function l(e,t){const{arrayBuffer:r,mediaType:i}=await p(e,t),s=\"image/png\"===i;if(\"image/gif\"===i&&a(r))return c(r);if(s&&o(r))return n(r,t);return u(new Blob([r],{type:i}),t)}async function p(r,o){let n;const a=\";base64,\";if(r.includes(a)){const e=r.indexOf(a),t=r.indexOf(a)+a.length,i=r.substring(t);n={arrayBuffer:s(i),mediaType:r.substring(0,e).replace(\"data:\",\"\")}}else try{const t=await e(r,{responseType:\"array-buffer\",...o}),i=t.data;n={arrayBuffer:i,mediaType:t.getHeader(\"Content-Type\")}}catch(c){if(!i(c))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}`)}return n}export{h as default};\n"],
  "mappings": "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",
  "names": ["r", "n", "i", "s", "a", "p", "c", "l", "h", "t", "o", "n", "a", "r", "o", "c", "d", "u", "h", "i", "s", "t", "t", "r", "i", "e", "s", "o", "n", "a", "c"]
}
