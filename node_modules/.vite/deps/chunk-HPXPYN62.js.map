{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/webgl/util/debug.js", "../../@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js", "../../@arcgis/core/views/2d/layers/features/tileRenderers/support/visualVariablesUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nconst n=(n,l)=>n&&((...n)=>l.warn(\"DEBUG:\",...n))||(()=>null),l=!1;export{l as DEBUG_ATTR_UPDATES,n as createDebugLogger};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";function l(l){return r(l.minDataValue)&&r(l.maxDataValue)&&null!=l.minSize&&null!=l.maxSize?i.SIZE_MINMAX_VALUE:(l.expression&&\"view.scale\"===l.expression||l.valueExpression&&\"$view.scale\"===l.valueExpression)&&Array.isArray(l.stops)?i.SIZE_SCALE_STOPS:(null!=l.field||l.expression&&\"view.scale\"!==l.expression||l.valueExpression&&\"$view.scale\"!==l.valueExpression)&&(Array.isArray(l.stops)||\"levels\"in l&&l.levels)?i.SIZE_FIELD_STOPS:(null!=l.field||l.expression&&\"view.scale\"!==l.expression||l.valueExpression&&\"$view.scale\"!==l.valueExpression)&&null!=l.valueUnit?i.SIZE_UNIT_VALUE:(s.getLogger(\"esri.views.2d.engine.webgl\").error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",l)),i.NONE)}export{l as getTypeOfSizeVisualVariable};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{toPt as e,pt2px as t}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlpha as s}from\"../../../../engine/webgl/color.js\";import{NAN_MAGIC_NUMBER as n}from\"../../../../engine/webgl/definitions.js\";import{WGLVVFlag as o}from\"../../../../engine/webgl/enums.js\";import{getTypeOfSizeVisualVariable as i}from\"../../../../engine/webgl/visualVariablesUtils.js\";function l(e,t){if(!e||!t)return e;switch(t){case\"radius\":case\"distance\":return 2*e;case\"diameter\":case\"width\":return e;case\"area\":return Math.sqrt(e)}return e}function r(t){return{value:t.value,size:e(t.size)}}function a(e){return(e??[]).map((e=>r(e)))}function u(t){if(\"string\"==typeof t||\"number\"==typeof t)return e(t);const s=t;return{type:\"size\",expression:s.expression,stops:a(s.stops)}}const p=e=>{const s=[],o=[],i=a(e),l=i.length;for(let r=0;r<6;r++){const e=i[Math.min(r,l-1)];s.push(e.value),o.push(null==e.size?n:t(e.size))}return{values:new Float32Array(s),sizes:new Float32Array(o)}};function c(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t||!s)return{vvFields:t,vvRanges:s};for(const n of e)if(n.field&&(t[n.type]=n.field),\"size\"===n.type){s.size||(s.size={});const e=n;switch(i(e)){case o.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:u(e.minSize),maxSize:u(e.maxSize)};break;case o.SIZE_SCALE_STOPS:s.size.scaleStops={stops:a(e.stops)};break;case o.SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=p(e.levels[s]);s.size.fieldStops={type:\"level-dependent\",levels:t}}else s.size.fieldStops={type:\"static\",...p(e.stops)};break;case o.SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation??void 0}}}else if(\"color\"===n.type)s.color=m(n);else if(\"opacity\"===n.type)s.opacity=f(n);else if(\"rotation\"===n.type){const e=n;s.rotation={type:e.rotationType}}return{vvFields:t,vvRanges:s}}function f(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(\"string\"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,t.opacities[e]=n.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function v(e,t,s){e[4*t]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function m(e){if(null==e)return null;if(e.normalizationField)return null;const t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if(\"string\"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;t.field=e.field;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,v(t.colors,e,n.color)}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].color;for(let e=0;e<8;e++)t.values[e]=1/0,v(t.colors,e,s)}}for(let n=0;n<32;n+=4)s(t.colors,n,!0);return t}export{m as convertColorVariable,c as convertVisualVariables,l as getVisualVariableSizeValueRepresentationRatio,u as normalizeSizeElement,a as normalizeSizeStops,r as stopToSizeStop};\n"],
  "mappings": "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",
  "names": ["n", "l", "l", "s", "l", "t", "r", "e", "u", "s", "o", "n"]
}
