{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/cim/ExpandedCIM.js", "../../@arcgis/core/views/2d/layers/support/webStyleUtils.js", "../../@arcgis/core/views/2d/layers/support/cimSymbolUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e,WGLSymbologyType as t}from\"../../views/2d/engine/webgl/enums.js\";import{createMaterialKey as a}from\"../../views/2d/engine/webgl/materialKey/MaterialKey.js\";const s={marker:e.MARKER,fill:e.FILL,line:e.LINE,text:e.TEXT};class l{constructor(e,l,n,r){const c={minScale:l?.minScale,maxScale:l?.maxScale},m=i(c);this.layers=e,this.data=l,this.hash=this._createHash()+m,this.rendererKey=n;const o={isOutline:!1,placement:null,symbologyType:t.DEFAULT,vvFlags:n};for(const t of e){const e=s[t.type];o.isOutline=\"line\"===t.type&&t.isOutline,t.materialKey=a(e,o),t.maxVVSize=r,t.scaleInfo=c,t.templateHash+=m}}get type(){return\"expanded-cim\"}_createHash(){let e=\"\";for(const t of this.layers)e+=t.templateHash;return e}}function i(e){return e.minScale||e.maxScale?e.minScale+\"-\"+e.maxScale:\"\"}export{l as ExpandedCIM};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import o from\"../../../../core/Error.js\";import{throwIfAbortError as e}from\"../../../../core/promiseUtils.js\";import{urlToObject as s}from\"../../../../core/urlUtils.js\";import l from\"../../../../portal/Portal.js\";import{f as n}from\"../../../../chunks/persistableUrlUtils.js\";import{fetchStyle as m,Style2DUrlTemplate as a,requestJSON as i,makeCIMSymbolRef as c,symbolUrlFromStyleItem as y}from\"../../../../symbols/support/styleUtils.js\";import{getStyleItemFromStyle as u}from\"../../../../symbols/support/webStyleSymbolUtils.js\";async function f(t,r,s){if(!t.name)throw new o(\"style-symbol-reference-name-missing\",\"Missing name in style symbol reference\");if(t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName)return p(t,s);try{return b(await m(t,r,s),t.name,r,s)}catch(l){return e(l),null}}async function p(t,r){const o=a.replaceAll(/\\{SymbolName\\}/gi,t.name);try{const t=await i(o,r);return c(t.data)}catch(s){return e(s),null}}async function b(m,a,f,p){const b={portal:f&&null!=f.portal?f.portal:l.getDefault(),url:s(m.baseUrl),origin:\"portal-item\"},j=u(a,m.data);if(!j){throw new o(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${a}' could not be found`,{symbolName:a})}let w=n(y(j,\"cimRef\"),b);t()&&(w=r(w));try{const t=await i(w,p);return c(t.data)}catch(U){return e(U),null}}export{f as fetchCIMSymbolReference};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{CIMAnalyzer as e}from\"../../../../symbols/cim/cimAnalyzer.js\";import{ExpandedCIM as t}from\"../../../../symbols/cim/ExpandedCIM.js\";import{fetchCIMSymbolReference as a}from\"./webStyleUtils.js\";const i=async(a,i,r)=>{const n=new e(r,i);return new t(await n.analyzeSymbolReference(a.data,!1),a.data,a.rendererKey,a.maxVVSize)};async function r(e,t,r,n){if(!e)return null;if(\"cim\"===e.type)return i(e,t,r);if(\"web-style\"===e.type){const l={type:\"cim\",data:await a(e,null,n)??void 0,rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return i(l,t,r)}return e}function n(e){if(!e)return null;const{avoidSDFRasterization:t,type:a,cim:i,url:r,materialHash:n,maxVVSize:l}=e,m={cim:i,type:a,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(a){case\"marker\":l&&\"size\"in i&&(i.size=Math.max(l,i.size)),m.size=e.size,m.path=e.path,m.animatedSymbolProperties=e.animatedSymbolProperties;break;case\"line\":m.dashTemplate=e.dashTemplate;break;case\"text\":m.text=e.text,m.fontName=e.fontName}return m}export{n as cimLayerToRasterizationInfo,r as expandSymbol};\n"],
  "mappings": "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",
  "names": ["s", "l", "n", "r", "c", "i", "e", "f", "f", "r", "s", "p", "b", "c", "l", "t", "a", "j", "w", "i", "a", "r", "n", "l", "f"]
}
