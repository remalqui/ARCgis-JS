{
  "version": 3,
  "sources": ["../../@arcgis/core/core/support/WatchUpdatingTracking.js", "../../@arcgis/core/core/HandleOwner.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import e from\"../Accessor.js\";import t from\"../Handles.js\";import{makeHandle as i}from\"../handleUtils.js\";import{watch as n,when as d,on as a,sync as r}from\"../reactiveUtils.js\";import{schedule as h}from\"../scheduling.js\";import{property as o}from\"../accessorSupport/decorators/property.js\";import{subclass as l}from\"../accessorSupport/decorators/subclass.js\";let c=class extends e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new t,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(s,e,t={}){return this._installWatch(s,e,t,n)}addWhen(s,e,t={}){return this._installWatch(s,e,t,d)}addOnCollectionChange(s,e,{initial:t=!1,final:n=!1}={}){const d=++this._handleId;return this._handles.add([a(s,\"after-changes\",this._createSyncUpdatingCallback(),r),a(s,\"change\",e,{onListenerAdd:t?s=>e({added:s.toArray(),removed:[]}):void 0,onListenerRemove:n?s=>e({added:[],removed:s.toArray()}):void 0})],d),i((()=>this._handles.remove(d)))}addPromise(s){if(null==s)return s;const e=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(s)&&(0!==this._pendingPromises.size||this._handles.has(_)||this._set(\"updating\",!1))}},e),this._pendingPromises.add(s),this._set(\"updating\",!0);const t=()=>this._handles.remove(e);return s.then(t,t),s}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set(\"updating\",!1)}_installWatch(s,e,t={},n){const d=++this._handleId;t.sync||this._installSyncUpdatingWatch(s,d);const a=n(s,e,t);return this._handles.add(a,d),i((()=>this._handles.remove(d)))}_installSyncUpdatingWatch(s,e){const t=this._createSyncUpdatingCallback(),i=n(s,t,{sync:!0,equals:()=>!1});return this._handles.add(i,e),i}_createSyncUpdatingCallback(){return()=>{this._handles.remove(_),++this._scheduleHandleId;const s=this._scheduleHandleId;this._get(\"updating\")||this._set(\"updating\",!0),this._handles.add(h((()=>{s===this._scheduleHandleId&&(this._set(\"updating\",this._pendingPromises.size>0),this._handles.remove(_))})),_)}}};s([o({readOnly:!0})],c.prototype,\"updating\",void 0),c=s([l(\"esri.core.support.WatchUpdatingTracking\")],c);const _=-42;export{c as WatchUpdatingTracking};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import e from\"./Accessor.js\";import r from\"./Handles.js\";import{property as t}from\"./accessorSupport/decorators/property.js\";import{subclass as o}from\"./accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as n}from\"./support/WatchUpdatingTracking.js\";const a=e=>{let a=class extends e{constructor(){super(...arguments),this._handles=new r,this._updatingHandles=new n}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return s([t({readOnly:!0})],a.prototype,\"handles\",null),s([t({readOnly:!0})],a.prototype,\"updatingHandles\",null),a=s([o(\"esri.core.HandleOwner\")],a),a};let d=class extends(a(e)){};d=s([o(\"esri.core.HandleOwner\")],d);export{d as HandleOwner,a as HandleOwnerMixin};\n"],
  "mappings": "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",
  "names": ["e", "t", "d", "a", "s", "a", "e"]
}
