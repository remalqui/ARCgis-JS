import {
  C,
  g
} from "./chunk-7KM4XBUC.js";

// node_modules/@arcgis/core/views/layers/support/popupUtils.js
async function n(n2, p2 = n2.popupTemplate) {
  var _a, _b;
  if (null == p2)
    return [];
  const t = await p2.getRequiredFields(n2.fieldsIndex), { lastEditInfoEnabled: u } = p2, { objectIdField: d, typeIdField: i, globalIdField: s, relationships: a } = n2;
  if (t.includes("*"))
    return ["*"];
  const o = u ? await C(n2) : [], f = g(n2.fieldsIndex, [...t, ...o]);
  return i && f.push(i), f && d && ((_a = n2.fieldsIndex) == null ? void 0 : _a.has(d)) && !f.includes(d) && f.push(d), f && s && ((_b = n2.fieldsIndex) == null ? void 0 : _b.has(s)) && !f.includes(s) && f.push(s), a && a.forEach((e) => {
    var _a2;
    const { keyField: l } = e;
    f && l && ((_a2 = n2.fieldsIndex) == null ? void 0 : _a2.has(l)) && !f.includes(l) && f.push(l);
  }), f;
}
function p(e, l) {
  return e.popupTemplate ? e.popupTemplate : null != l && l.defaultPopupTemplateEnabled && null != e.defaultPopupTemplate ? e.defaultPopupTemplate : null;
}

export {
  n,
  p
};
//# sourceMappingURL=chunk-6YPETR6R.js.map
