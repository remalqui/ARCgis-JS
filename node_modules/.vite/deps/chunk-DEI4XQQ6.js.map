{
  "version": 3,
  "sources": ["../../@arcgis/core/portal/support/resourceUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as a}from\"../../core/urlUtils.js\";async function s(e,t={},a){await e.load(a);const s=r(e.itemUrl,\"resources\"),{start:o=1,num:n=10,sortOrder:u=\"asc\",sortField:l=\"created\"}=t,c={query:{start:o,num:n,sortOrder:u,sortField:l,token:e.apiKey},signal:a?.signal},i=await e.portal.request(s,c);return{total:i.total,nextStart:i.nextStart,resources:i.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function o(e,a,s,o){if(!e.hasPath())throw new t(`portal-item-resource-${a}:invalid-path`,\"Resource does not have a valid path\");const n=e.portalItem;await n.load(o);const u=r(n.userItemUrl,\"add\"===a?\"addResources\":\"updateResources\"),[c,i]=l(e.path),d=await p(s),m=new FormData;return c&&\".\"!==c&&m.append(\"resourcesPrefix\",c),null!=o&&o.compress&&m.append(\"compress\",\"true\"),m.append(\"fileName\",i),m.append(\"file\",d,i),m.append(\"f\",\"json\"),null!=o&&o.access&&m.append(\"access\",o.access),await n.portal.request(u,{method:\"post\",body:m,signal:o?.signal}),e}async function n(e,a,s){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(s);const o=r(e.userItemUrl,\"removeResources\");await e.portal.request(o,{method:\"post\",query:{resource:a.path},signal:s?.signal}),a.portalItem=null}async function u(e,t){await e.load(t);const a=r(e.userItemUrl,\"removeResources\");return e.portal.request(a,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function c(e){const[t,r]=i(e),[a,s]=l(t);return[a,s,r]}function i(e){const t=a(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function d(e,t){if(!e.hasPath())return null;const[a,,s]=c(e.path);return e.portalItem.resourceFromPath(r(a,t+s))}function m(e,t){if(!e.hasPath())return null;const[a,,s]=c(e.path);return e.portalItem.resourceFromPath(r(a,t+s))}export{o as addOrUpdateResource,p as contentToBlob,s as fetchResources,d as getSiblingOfSameType,m as getSiblingOfSameTypeI,u as removeAllResources,n as removeResource,c as splitPrefixFileNameAndExtension};\n"],
  "mappings": ";;;;;;;;;;;;AAIuI,eAAeA,GAAE,GAAE,IAAE,CAAC,GAAE,GAAE;AAAC,QAAM,EAAE,KAAK,CAAC;AAAE,QAAMA,KAAE,EAAE,EAAE,SAAQ,WAAW,GAAE,EAAC,OAAMC,KAAE,GAAE,KAAIC,KAAE,IAAG,WAAUC,KAAE,OAAM,WAAUC,KAAE,UAAS,IAAE,GAAEC,KAAE,EAAC,OAAM,EAAC,OAAMJ,IAAE,KAAIC,IAAE,WAAUC,IAAE,WAAUC,IAAE,OAAM,EAAE,OAAM,GAAE,QAAO,uBAAG,OAAM,GAAEE,KAAE,MAAM,EAAE,OAAO,QAAQN,IAAEK,EAAC;AAAE,SAAM,EAAC,OAAMC,GAAE,OAAM,WAAUA,GAAE,WAAU,WAAUA,GAAE,UAAU,IAAK,CAAC,EAAC,SAAQC,IAAE,MAAK,GAAE,UAASC,GAAC,OAAK,EAAC,SAAQ,IAAI,KAAKD,EAAC,GAAE,MAAK,GAAE,UAAS,EAAE,iBAAiBC,EAAC,EAAC,EAAG,EAAC;AAAC;AAAC,eAAe,EAAE,GAAE,GAAER,IAAEC,IAAE;AAAC,MAAG,CAAC,EAAE,QAAQ;AAAE,UAAM,IAAI,EAAE,wBAAwB,CAAC,iBAAgB,qCAAqC;AAAE,QAAMC,KAAE,EAAE;AAAW,QAAMA,GAAE,KAAKD,EAAC;AAAE,QAAME,KAAE,EAAED,GAAE,aAAY,UAAQ,IAAE,iBAAe,iBAAiB,GAAE,CAACG,IAAEC,EAAC,IAAE,EAAE,EAAE,IAAI,GAAEG,KAAE,MAAM,EAAET,EAAC,GAAEU,KAAE,IAAI;AAAS,SAAOL,MAAG,QAAMA,MAAGK,GAAE,OAAO,mBAAkBL,EAAC,GAAE,QAAMJ,MAAGA,GAAE,YAAUS,GAAE,OAAO,YAAW,MAAM,GAAEA,GAAE,OAAO,YAAWJ,EAAC,GAAEI,GAAE,OAAO,QAAOD,IAAEH,EAAC,GAAEI,GAAE,OAAO,KAAI,MAAM,GAAE,QAAMT,MAAGA,GAAE,UAAQS,GAAE,OAAO,UAAST,GAAE,MAAM,GAAE,MAAMC,GAAE,OAAO,QAAQC,IAAE,EAAC,QAAO,QAAO,MAAKO,IAAE,QAAOT,MAAA,gBAAAA,GAAG,OAAM,CAAC,GAAE;AAAC;AAAC,eAAe,EAAE,GAAE,GAAED,IAAE;AAAC,MAAG,CAAC,EAAE,QAAQ;AAAE,UAAM,IAAI,EAAE,6CAA4C,qCAAqC;AAAE,QAAM,EAAE,KAAKA,EAAC;AAAE,QAAMC,KAAE,EAAE,EAAE,aAAY,iBAAiB;AAAE,QAAM,EAAE,OAAO,QAAQA,IAAE,EAAC,QAAO,QAAO,OAAM,EAAC,UAAS,EAAE,KAAI,GAAE,QAAOD,MAAA,gBAAAA,GAAG,OAAM,CAAC,GAAE,EAAE,aAAW;AAAI;AAAC,eAAe,EAAE,GAAE,GAAE;AAAC,QAAM,EAAE,KAAK,CAAC;AAAE,QAAM,IAAE,EAAE,EAAE,aAAY,iBAAiB;AAAE,SAAO,EAAE,OAAO,QAAQ,GAAE,EAAC,QAAO,QAAO,OAAM,EAAC,WAAU,KAAE,GAAE,QAAO,uBAAG,OAAM,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAM,IAAE,EAAE,YAAY,GAAG;AAAE,SAAM,OAAK,IAAE,CAAC,KAAI,CAAC,IAAE,CAAC,EAAE,MAAM,GAAE,CAAC,GAAE,EAAE,MAAM,IAAE,CAAC,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAK,CAAC,GAAE,CAAC,IAAE,EAAE,CAAC,GAAE,CAAC,GAAEA,EAAC,IAAE,EAAE,CAAC;AAAE,SAAM,CAAC,GAAEA,IAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAM,IAAE,GAAE,CAAC;AAAE,SAAO,QAAM,IAAE,CAAC,GAAE,EAAE,IAAE,CAAC,EAAE,MAAM,GAAE,EAAE,SAAO,EAAE,SAAO,CAAC,GAAE,IAAI,CAAC,EAAE;AAAC;AAAC,eAAe,EAAE,GAAE;AAAC,MAAG,aAAa;AAAK,WAAO;AAAE,UAAO,MAAM,EAAE,EAAE,KAAI,EAAC,cAAa,OAAM,CAAC,GAAG;AAAI;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,MAAG,CAAC,EAAE,QAAQ;AAAE,WAAO;AAAK,QAAK,CAAC,GAAE,EAACA,EAAC,IAAE,EAAE,EAAE,IAAI;AAAE,SAAO,EAAE,WAAW,iBAAiB,EAAE,GAAE,IAAEA,EAAC,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,MAAG,CAAC,EAAE,QAAQ;AAAE,WAAO;AAAK,QAAK,CAAC,GAAE,EAACA,EAAC,IAAE,EAAE,EAAE,IAAI;AAAE,SAAO,EAAE,WAAW,iBAAiB,EAAE,GAAE,IAAEA,EAAC,CAAC;AAAC;",
  "names": ["s", "o", "n", "u", "l", "c", "i", "t", "a", "d", "m"]
}
