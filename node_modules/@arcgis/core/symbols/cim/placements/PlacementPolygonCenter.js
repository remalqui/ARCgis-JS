/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import has from"../../../core/has.js";import{getCursorBoundsXY as t}from"../../../geometry/support/boundsUtils.js";import{weightedAreaCentroid as e}from"../../../geometry/support/centroid.js";import{getPolylabelPoint as s,labelPointAdapter as o}from"../../../geometry/support/labelPoint.js";import{Placement as n}from"../CIMPlacements.js";import{PlacementPolygonCenterMethod as r}from"../enums.js";class l{static local(){return null===l.instance&&(l.instance=new l),l.instance}execute(t,e,s,o,n){return new i(t,e,s)}}l.instance=null;class i{constructor(t,e,s){this._geometryCursor=t,this._offsetX=void 0!==e.offsetX?e.offsetX*s:0,this._offsetY=void 0!==e.offsetY?e.offsetY*s:0,this._method=void 0!==e.method?e.method:r.OnPolygon,this._internalPlacement=new n}next(){const t=this._geometryCursor;return this._geometryCursor=null,t?this._polygonCenter(t):null}_polygonCenter(n){let l=!1;switch(this._method){case r.CenterOfMass:{const t=e(n);t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),l=!0)}break;case r.BoundingBoxCenter:{const e=t(n);e&&(this._internalPlacement.setTranslate((e[2]+e[0])/2+this._offsetX,(e[3]+e[1])/2+this._offsetY),l=!0)}break;case r.OnPolygon:default:{let t;t=has("polylabel-placement-enabled")?s(n):o(n),null!==t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),l=!0)}}return l?this._internalPlacement:null}}export{l as PlacementPolygonCenter};
