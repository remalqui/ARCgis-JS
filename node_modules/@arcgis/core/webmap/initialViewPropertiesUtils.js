/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import e from"../Viewpoint.js";import{geographicToWebMercator as t}from"../geometry/support/webMercatorUtils.js";import{project as r}from"../rest/geometryService/project.js";import o from"../rest/support/ProjectParameters.js";async function n(t,r,o){const n=t?.viewpoint?.targetGeometry;if(n)return null;const s=await i(t,r,o);if(!s)return null;return new e({targetGeometry:s})}async function i(e,n,i){const s=e?.spatialReference,a=n?.extent;if(!s||!a)return null;if(s.isWGS84)return a.clone();if(s.isWebMercator)return t(a);const{getGeometryServiceURL:c}=await import("../portal/support/geometryServiceUtils.js");try{const e=await c(n),t=new o;t.geometries=[a],t.outSpatialReference=s;return(await r(e,t))[0]}catch(p){i.error("Error projecting item's extent:",p)}return null}export{n as computeInitialViewpoint};
