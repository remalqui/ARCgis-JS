/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{id as r}from"../kernel.js";import e from"../request.js";import n from"../portal/Portal.js";function t(r,e){if(null===r)return e;return new n({url:r.field("url")})}async function s(n,t,s){const u=r?.findCredential(n.restUrl);if(!u)return null;if("loaded"===n.loadStatus&&""===t&&n.user&&n.user.sourceJSON&&!1===s)return n.user.sourceJSON;if(""===t){const r=await e(n.restUrl+"/community/self",{responseType:"json",query:{f:"json",...!1===s?{}:{returnUserLicenseTypeExtensions:!0}}});if(r.data){const e=r.data;if(e&&e.username)return e}return null}const o=await e(n.restUrl+"/community/users/"+t,{responseType:"json",query:{f:"json"}});if(o.data){const r=o.data;return r.error?null:r}return null}export{t as getPortal,s as lookupUser};
