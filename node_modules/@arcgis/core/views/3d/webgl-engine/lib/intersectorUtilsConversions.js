/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{applySome as r}from"../../../../core/maybe.js";import{l as e}from"../../../../chunks/mat4.js";import{c as t}from"../../../../chunks/vec3f64.js";import{diameter as n}from"../../../../geometry/support/aaBoundingBox.js";import{a as i}from"../../../../chunks/sphere.js";import{isPclIntersectorResult as l,isI3sIntersectorResult as a,isVoxelIntersectorResult as u}from"../../layers/i3s/Intersector.js";import{isTerrainIntersectorResult as o,isOverlayIntersectorResult as c}from"../../terrain/Intersector.js";import{isObjectIntersectorResult as s,isHudIntersectorResult as p}from"./intersectorUtils.js";import{isLodIntersectorResult as g}from"./lodRendering/Intersector.js";function f(r,e){return s(r)||p(r)?V(r.target?.object,e):o(r)?e.map?.ground:l(r)||a(r)||c(r)||u(r)?V(r.target,e):null}function m(r,e){const t=d(r,e);return null!=t&&"graphic"===t.type?t.graphic:null}function d(r,e){if(null==r)return null;if(s(r)||p(r))return h(r.target?.object,e);if(l(r)){const e=r.target.createGraphic();return{type:"graphic",graphic:e,layer:e.layer}}if(u(r)){const e=r.target.createVoxelGraphic();return{type:"graphic",graphic:e,layer:e.layer}}return c(r)||g(r)?h(r.target,e):a(r)?y(r.target,e):null}function h(r,e){if(null==r||null==r.graphicUid)return null;const t=V(r,e);if(null==t)return null;if(t===e.graphics)return null==e.graphicsView||"number"!=typeof r.graphicUid?null:e.graphicsView.getHit(r.graphicUid);const n=e.allLayerViews.find((r=>r.layer===t));return!n||n.suspended||null==r.graphicUid?null:"getHit"in n?n.getHit(r.graphicUid):null}function y(r,e){const t=V(r,e);if(null==t)return null;const n=e.allLayerViews.find((r=>r.layer===t));return n&&!n.suspended&&"getGraphicFromIntersectorTarget"in n?U(n.getGraphicFromIntersectorTarget(r)):null}function j(r,e){const t=V(r,e);if(null==t)return null;const n=e.allLayerViews.find((r=>r.layer===t));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(r):null}function U(r){return null!=r?{type:"graphic",graphic:r,layer:r.layer}:null}function V(r,e){return r&&null!=r.layerUid?null!=e.graphicsView&&r.layerUid===e.graphicsView.processor.layer.id?e.graphics:e.map.findLayerByUid(r.layerUid):null}function b(t,l){if(s(t)||p(t))return i(t.target.object.boundingVolumeWorldSpace.bounds);if(g(t)){e(w,t.transformation);const r=Math.max(w[0],w[1],w[2]);return t.target.baseBoundingSphere.radius*r}return a(t)?r(j(t.target,l),(r=>.5*n(r))):null}function B(r){return!s(r)&&!p(r)&&(g(r)?r.target.numLodLevels>1:!!a(r))}const w=t();export{b as getIntersectedFeatureBSRadius,B as hasLod,m as toGraphic,d as toHit,f as toOwner};
