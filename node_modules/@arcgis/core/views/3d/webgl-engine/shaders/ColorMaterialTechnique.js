/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{Z as e}from"../../../../chunks/vec4f64.js";import{ShaderOutput as r}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as s}from"../lib/DefaultVertexAttributeLocations.js";import{blendingDefault as o,oitBlending as n,oitDepthTest as a,getOITPolygonOffset as l}from"../lib/OrderIndependentTransparency.js";import{Program as c}from"../lib/Program.js";import{stencilWriteMaskOn as p,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as m}from"../lib/StencilUtils.js";import{TransparencyPassType as h}from"../lib/TransparencyPassType.js";import{VisualVariablePassParameters as f}from"../materials/VisualVariablePassParameters.js";import{C as d}from"../../../../chunks/ColorMaterial.glsl.js";import{makePipelineState as g,cullingParams as P,defaultDepthWriteParams as b,defaultColorWriteParams as j}from"../../../webgl/renderState.js";class y extends f{constructor(){super(...arguments),this.color=e}}class T extends i{initializeProgram(e){return new c(e.rctx,T.shader.get().build(this.configuration),s)}_createPipeline(e,t){const i=this.configuration,s=e===h.NONE,c=e===h.FrontFace;return g({blending:i.output!==r.Color&&i.output!==r.Alpha||!i.transparent?null:s?o:n(e),culling:P(i.cullFace),depthTest:{func:a(e)},depthWrite:(s||c)&&i.writeDepth?b:null,colorWrite:j,stencilWrite:i.hasOccludees?p:null,stencilTest:i.hasOccludees?t?u:m:null,polygonOffset:s||c?i.polygonOffset?S:null:l(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e,r){return r?this._occludeePipelineState:super.getPipelineState(e,r)}}T.shader=new t(d,(()=>import("./ColorMaterial.glsl.js")));const S={factor:1,units:1};export{y as ColorMaterialPassParameters,T as ColorMaterialTechnique};
