/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{ViewingMode as e}from"../../../ViewingMode.js";import{ShaderOutput as t}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as o}from"../lib/DefaultVertexAttributeLocations.js";import{oitBlending as n}from"../lib/OrderIndependentTransparency.js";import{Program as s}from"../lib/Program.js";import{TransparencyPassType as a}from"../lib/TransparencyPassType.js";import{H as l}from"../../../../chunks/HUDMaterial.glsl.js";import{BlendFactor as u,CompareFunction as p,PrimitiveType as c}from"../../../webgl/enums.js";import{simpleBlendingParams as h,defaultDepthWriteParams as m,makePipelineState as f,defaultColorWriteParams as d}from"../../../webgl/renderState.js";class g extends r{initializeConfiguration(t,i){i.spherical=t.viewingMode===e.Global}initializeProgram(e){return new s(e.rctx,g.shader.get().build(this.configuration),o)}_setPipelineState(e){const i=this.configuration,r=e===a.NONE,o=e===a.FrontFace,s=this.configuration.hasPolygonOffset?b:null,l=(r||o)&&i.output!==t.Highlight&&(i.depthEnabled||i.occlusionPass)?m:null;return f({blending:i.output===t.Color||i.output===t.Alpha||i.output===t.Highlight?r?j:n(e):null,depthTest:{func:p.LEQUAL},depthWrite:l,colorWrite:d,polygonOffset:s})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return this.configuration.occlusionPass?c.POINTS:c.TRIANGLES}}g.shader=new i(l,(()=>import("./HUDMaterial.glsl.js")));const b={factor:0,units:-4},j=h(u.ONE,u.ONE_MINUS_SRC_ALPHA);export{g as HUDMaterialTechnique};
