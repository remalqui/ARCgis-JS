/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{c as e}from"../../../../chunks/vec3f64.js";import{projectPointToVector as r}from"../../../../geometry/projection.js";import{containsPoint as t}from"../../../../geometry/support/aaBoundingBox.js";import{getPointOnPath as n,getPathLength as o}from"../../../../geometry/support/coordsUtils.js";import{makeDehydratedPoint as i}from"../../../../layers/graphics/dehydratedFeatures.js";import{applyElevationAlignmentForHUD as s}from"./elevationAlignmentUtils.js";import{computeCentroid as l}from"./graphicUtils.js";import{Object3D as a}from"../../webgl-engine/lib/Object3D.js";function c(e,n,o,i,l,c){const p=e.clippingExtent;if(r(n,m,e.elevationProvider.spatialReference),null!=p&&!t(p,m))return null;r(n,m,e.renderCoordsHelper.spatialReference),o.shaderTransformer=c,o.localOrigin=e.localOriginFactory.getOrigin(m);const u=new a({geometries:[o],castShadow:!1,layerUid:e.layer.uid,graphicUid:l,usesVerticalDistanceToGround:!0});return{object:u,sampledElevation:s(u,n,e.elevationProvider,e.renderCoordsHelper,i)}}function p(e,t,n){const o=e.elevationContext,s=n.spatialReference;r(t,m,s),o.centerPointInElevationSR=i(m[0],m[1],t.hasZ?m[2]:0,null!=s?s:null)}function u(e){switch(e.type){case"point":return e;case"polygon":case"extent":return l(e);case"polyline":{const r=e.paths[0];if(!r||0===r.length)return null;const t=n(r,o(r)/2);return i(t[0],t[1],t[2],e.spatialReference)}case"mesh":return e.origin}return null}const m=e();export{c as createStageObject,p as extendPointGraphicElevationContext,u as placePointOnGeometry};
