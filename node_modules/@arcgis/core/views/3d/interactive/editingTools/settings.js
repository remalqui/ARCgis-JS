/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import e from"../../../../Color.js";import{getAccentColor as t,getContrastColor as o}from"../../../../core/analysisThemeUtils.js";import{memoize as i}from"../../../../core/memoize.js";import{ExtensionType as l}from"../visualElements/ExtendedLineVisualElement.js";import{RenderOccludedFlag as s}from"../../webgl-engine/lib/Material.js";import{createStipplePatternSimple as n}from"../../webgl-engine/materials/lineStippleUtils.js";import{desaturate as r,multiplyOpacity as h,unitRGBAFromColor as c}from"../../../support/colorUtils.js";const a=i((i=>({accent:t(),contrast:o(),selected:new e([255,255,255]),selectedOutline:new e([255,255,255]),staged:new e([12,207,255]),outline:new e([0,0,0,.5])}))),d=.3;function p(e,t){t&&Object.assign(e,t)}class u{constructor({theme:e,...t}){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=s.Opaque,this.color=a(e).accent,p(this,t)}}class g{constructor({theme:e,...t}){this.size=11,this.outlineSize=1,this.collisionPadding=9;const o=a(e);this.color=o.accent,this.outlineColor=o.outline,this.renderOccluded=s.Opaque,this.hoverOutlineColor=o.selectedOutline,p(this,t)}apply(e,t){const o=this[e];t.setParameters({color:c(o),transparent:"color"!==e||o.a<1,renderOccluded:this.renderOccluded})}}class m{constructor({theme:e,...t}){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=s.Transparent,this.minSquaredEdgeLength=900;const o=a(e);this.color=h(o.accent,.5),this.hoverColor=o.accent,p(this,t)}apply(e,t){const o=this[e];t.setParameters({color:c(o),transparent:o.a<1,renderOccluded:this.renderOccluded})}}class w{constructor({theme:e}){const t=a(e);this.vertex=new g({theme:e,color:t.accent,outlineColor:t.outline}),this.edge=new g({theme:e,color:r(h(t.accent,2/3),.5),outlineColor:h(t.outline,.5),size:8,collisionPadding:8}),this.selected=new g({theme:e,color:t.selected,outlineColor:t.outline}),this.edgeOffset=new m({theme:e})}}class f{constructor({theme:e,...t}){this.width=1.5,this.stipplePattern=n(5),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=s.OccludeAndTransparent;const o=a(e);this.color=o.selected,this.stippleOffColor=o.outline,this.innerColor=o.selected,p(this,t)}apply(e){e.color=c(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=c(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=c(this.innerColor),e.renderOccluded=this.renderOccluded}}class C{constructor({theme:e,...t}){this.size=4,this.outlineSize=1,this.shape="square";const o=a(e);this.color=o.selected,this.outlineColor=o.outline,p(this,t)}apply(e){e.color=c(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=c(this.outlineColor),e.primitive=this.shape}}class O{constructor({theme:e,...t}){this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=d,this.globalAlphaContrastBoost=1.5,this.radius=3;const o=a(e);this.innerColor=o.selected,this.glowColor=o.accent,this.heightFillColor=o.accent,p(this,t)}apply(t,o=1){const i={glowColor:e.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:e.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*o,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in t?t.style=i:t.laserlineStyle=i}}class W{constructor({theme:e,...t}){const o=a(e);this.outline=new f({theme:e,color:o.outline,renderOccluded:s.OccludeAndTransparentStencil,stippleOffColor:o.selected,stipplePattern:n(5),width:1.5,innerWidth:0}),this.staged=new f({theme:e,color:o.selected,renderOccluded:s.OccludeAndTransparentStencil,innerColor:o.staged,stippleOffColor:o.outline,stipplePattern:n(5),width:1.5}),this.shadowStyle=new O({theme:e,globalAlpha:d,glowColor:o.accent,glowFalloff:8,glowWidth:8,innerColor:o.selected,innerWidth:1}),p(this,t)}}class A{constructor({theme:e,...t}){const o=a(e);this.outline=new C({theme:e,color:o.selected,outlineColor:o.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new O({theme:e,globalAlpha:d,glowColor:o.accent,glowFalloff:1.5,glowWidth:6,innerColor:o.selected,innerWidth:1,radius:2}),p(this,t)}}class z extends f{constructor({theme:e,...t}){super({theme:e}),this.extensionType=l.GROUND_RAY,p(this,t)}}class b{constructor({theme:e}){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20;const t=a(e);this.lineGraphics=new W({theme:e}),this.pointGraphics=new A({theme:e}),this.heightPlane=new O({theme:e,globalAlpha:d,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1}),this.heightBox=new O({theme:e,globalAlpha:d,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:0,heightFillColor:t.accent}),this.zVerticalLine=new z({theme:e,color:h(t.accent,5*d/3),falloff:2,innerColor:h(t.selected,0),renderOccluded:s.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:l.GROUND_RAY})}}class y{constructor(e){this.colors=a(e.theme),this.visualElements=new b(e),this.manipulators=new w(e),this.zManipulator=new u(e)}}const P=i((e=>new y({theme:e})));export{P as getSettings};
