/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{watch as e,syncAndInitial as n}from"../../../core/reactiveUtils.js";import{d as t}from"../../../chunks/vec3.js";import{makeDehydratedPoint as r}from"../../../layers/graphics/dehydratedFeatures.js";import{ViewEventPriorities as o}from"../../input/InputManager.js";import{SNAPPING_KEYS as i}from"../keybindings.js";import{anyMapPointToSnappingPoint as s}from"./SnappingPoint.js";function a(e,n){const t=e.length===n.length&&e[0]===n[0]&&e[1]===n[1];switch(e.length){case 2:return t;case 3:return t&&e[2]===n[2];case 4:return t&&e[2]===n[2]&&e[3]===n[3]}return!1}function p(e,n){const t=e.x-n.x,r=e.y-n.y;return t*t+r*r}function g(e,n){return Math.sqrt(p(e,n))}function u(e,n){n.sort(((n,r)=>t(n.targetPoint,e)-t(r.targetPoint,e)))}var c;function l({point:e,distance:n,returnEdge:t,returnVertex:o,coordinateHelper:{spatialReference:i}},s,a){return{point:r(e[0],e[1],e[2],i.toJSON()),mode:s,distance:n,returnEdge:t,returnVertex:o,query:null!=a?a.toJSON():{where:"1=1"}}}function d(e,n,t){return{left:s(e.leftVertex.pos,n,t),right:s(e.rightVertex.pos,n,t)}}function E(e){return e.createQuery()}function f(t,r=(()=>{})){const s=e((()=>({view:t.view,snappingOptions:t.snappingOptions})),(({view:e,snappingOptions:n})=>{const s="snapping-toggle",a=o.TOOL;if(t.removeHandles(s),e&&null!=n){const o=[e.on("key-down",(e=>{e.key!==i.toggle||e.repeat||(n.enabledToggled=!0,r())}),a),e.on("key-up",(e=>{e.key===i.toggle&&(n.enabledToggled=!1,r())}),a),e.on("pointer-move",(e=>{const t=e.native.ctrlKey;n.enabledToggled!==t&&(n.enabledToggled=t,r())}),a)];t.addHandles(o,s)}}),n);t.addHandles(s)}!function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}(c||(c={}));export{c as LineSegmentHintType,d as editEdgeToSnappingEdge,E as makeFilter,l as makeSnappingQuery,a as objectEqual,g as screenDistance,f as setupSnappingToggleHandles,u as sortCandidatesInPlace,p as squaredScreenDistance};
