/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import e from"../../../core/Accessor.js";import{destroyMaybe as o}from"../../../core/maybe.js";import{watch as n,syncAndInitial as i}from"../../../core/reactiveUtils.js";import{property as s}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import{BASE as c}from"./css.js";import{tooltipContentFactory as a}from"./content/tooltipContentFactory.js";import{isRTL as l}from"../../../widgets/support/widgetUtils.js";const p={base:`${c}`};let d=class extends e{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(p.base),t})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([n((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t)}),i),n((()=>this.info),((e,n)=>{if(null!=this._contentWidget&&null!=e&&null!=n&&e.type===n.type)this._contentWidget.info=e;else{this._contentWidget=o(this._contentWidget);const n=a(this,e);n&&(this._contentWidget=n,n.container&&t.appendChild(n.container))}}),i),n((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint})),u,i)])}destroy(){this._contentWidget=o(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}get test(){return{contentContainer:this._contentContainer,visible:"none"!==this._contentContainer?.style.display}}};function u({container:t,contentWidget:e,screenPoint:o}){const{style:n}=t;if(null!=o&&null!=e){n.display="block";const e=l(t),i=`translate(${Math.round(o.x)+h[0]*(e?-1:1)}px, ${Math.round(o.y)+h[1]}px)`;n.transform=e?`translate(-100%, 0) ${i}`:i}else n.display="none"}t([s({nonNullable:!0})],d.prototype,"view",void 0),t([s()],d.prototype,"info",void 0),t([s()],d.prototype,"_contentContainer",void 0),t([s()],d.prototype,"_contentWidget",void 0),t([s()],d.prototype,"_screenPoint",null),d=t([r("esri.views.interactive.tooltip.Tooltip")],d);const h=[20,20];export{d as Tooltip};
