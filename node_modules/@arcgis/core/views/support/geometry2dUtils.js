/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{floatEqualAbsolute as t}from"../../core/mathUtils.js";import{d as n,g as r,x as s,a as e,c as o,i as u,y as a,j as c,h as i}from"../../chunks/vec2.js";import{d as f,a as p}from"../../chunks/vec2f64.js";function h(t,n){return t[0]*n[1]-t[1]*n[0]}function E(t,r,s){const e=(r[0]-t[0])*(s[1]-t[1])-(r[1]-t[1])*(s[0]-t[0]);return Math.abs(e)/n(r,s)}function I(t,n,o){const u=r(o,n)/s(o);return e(t,o,u)}function L(t,n,r,s,e=r){return o(b,s,r),o(x,n,e),I(A,x,b),u(t,e,A)}function N(t,n,e,u){o(b,u,e),o(x,n,e);const i=r(b,x)/s(b);return i>0?a(t,e,b,i):c(t,e)}function m(t,n,r,s){o(b,n,r);const e=s/i(b);return a(t,r,b,e)}function y(n,r){return L(x,r,n.start,n.end),t(x[0],r[0])&&t(x[1],r[1])?[f(r)]:[]}function d(n,r,s){return m(x,s,n,r),t(x[0],s[0])&&t(x[1],s[1])?[f(s)]:[]}function j(t,n){const r=t.start,s=t.end,e=n.start,u=n.end,c=o(b,s,r),i=o(k,u,e),f=h(c,i);if(Math.abs(f)<=M)return[];const p=o(x,r,e),E=h(i,p)/f,I=h(c,p)/f;if(E>=0){if(I>=0||n.type===v.LINE)return[a(A,r,c,E)]}else if(t.type===v.LINE&&(I>=0||n.type===v.LINE))return[a(A,r,c,E)];return[]}function l(t,n,e){const u=[],c=o(b,t.end,t.start),i=o(k,t.start,n),f=s(c),p=2*r(c,i),h=p*p-4*f*(s(i)-e*e);if(0===h){const n=-p/(2*f);(t.type===v.LINE||n>=0)&&u.push(a(A,t.start,c,n))}else if(h>0){const n=Math.sqrt(h),r=(-p+n)/(2*f);(t.type===v.LINE||r>=0)&&u.push(a(A,t.start,c,r));const s=(-p-n)/(2*f);(t.type===v.LINE||s>=0)&&u.push(a(x,t.start,c,s))}return u}var v;!function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"}(v||(v={}));const M=1e-6,b=p(),k=p(),x=p(),A=p();export{v as LineType,h as cross,d as intersectCircleAndPoint,y as intersectLineAndPoint,j as intersectLineAndRay,l as intersectLineLikeAndCircle,E as pointToLineDistance,I as projectPoint,m as projectPointToCircle,L as projectPointToLine,N as projectPointToRay};
