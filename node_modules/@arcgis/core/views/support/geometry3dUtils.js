/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{floatEqualAbsolute as t}from"../../core/mathUtils.js";import{c as n,x as s,g as r,y as e,b as o,h as c,d as u,k as a}from"../../chunks/vec2.js";import{a as f,d as i}from"../../chunks/vec2f64.js";import{s as p,w as A,e as L,A as h,i as E,f as N,u as d,b as m,E as y}from"../../chunks/vec3.js";import{c as P,a as I}from"../../chunks/vec3f64.js";import{LineType as R}from"./geometry2dUtils.js";function Y({start:t,end:o,type:c},u,a){const i=[],p=n(D,o,t),A=n(G,t,u),L=s(p),h=2*r(p,A),E=h*h-4*L*(s(A)-a*a);if(0===E){const n=-h/(2*L);(c===z.PLANE||n>=0)&&i.push(e(f(),t,p,n))}else if(E>0){const n=Math.sqrt(E),s=(-h+n)/(2*L);(c===z.PLANE||s>=0)&&i.push(e(f(),t,p,s));const r=(-h-n)/(2*L);(c===z.PLANE||r>=0)&&i.push(e(f(),t,p,r))}return i}function j(t,s){const e=t.start,c=t.end,u=n(D,c,e),a=p(G,-u[1],u[0],0),f=s.start,i=s.end,E=A(J,i,f),N=L(E,a),d=p(K,e[0],e[1],0),m=A(O,d,f),y=L(m,a);if(Math.abs(N)<C)return Math.abs(y),[];const P=h(Q,f,E,y/N);if(s.type===R.RAY){const t=A(S,P,f);if(L(t,E)<-C)return[]}if(t.type===z.HALF_PLANE){const t=o(S,P,e);if(r(t,u)<-C)return[]}return[I(P)]}function k(t,n){return q(U(T,n[2],t),n)}function v(t,n){const s=0,r=g(U(T,s,t),U(V,s,n)),e=[];for(const o of r)e.push(i(o));return e}function M(t,n){return H(t,U(T,t[2],n))}function b(t,n){return _(U(T,t[2],n),t)}function l(t,s,r){const o=n(D,t,s),u=r/c(o),a=e(P(),s,o,u);return a[2]=t[2],a}function F(t,n,s){return u(t,n)-s}function H(t,{start:n,end:s,type:r}){const e=A(D,t,n),o=A(G,s,n),c=L(e,o)/L(o,o);return h(P(),n,o,r===R.RAY?Math.max(c,0):c)}function _({start:t,end:n,type:s},r){const e=A(D,r,t),o=A(G,n,t);if(s===R.RAY&&L(o,e)<-C)return E(t,r);const c=N(J,o,e);return d(c)/d(o)}function x({start:t,end:e,type:o},c,u){const a=[],f=m(D,e,t),i=n(G,t,c),p=s(f),A=2*r(f,i),L=A*A-4*p*(s(i)-u*u);if(0===L){const n=-A/(2*p);(o===R.LINE||n>=0)&&a.push(h(P(),t,f,n))}else if(L>0){const n=Math.sqrt(L),s=(-A+n)/(2*p);(o===R.LINE||s>=0)&&a.push(h(P(),t,f,s));const r=(-A-n)/(2*p);(o===R.LINE||r>=0)&&a.push(h(P(),t,f,r))}return a}function g(n,s){const r=n.start,e=n.end,o=s.start,c=s.end,u=A(D,e,r),a=A(G,c,o),f=A(J,o,r),i=N(K,u,a),p=L(f,i);if(!t(p,0,C))return[];const E=y(i);if(t(E,0,C))return[];const d=N(O,f,a),m=L(d,i)/E,P=h(Q,r,u,m);if(n.type===R.RAY){const t=A(S,P,r);if(L(u,t)<-C)return[]}if(s.type===R.RAY){const t=A(S,P,o);if(L(a,t)<-C)return[]}return[I(P)]}function q({start:t,end:n,type:s},r){const e=A(D,r,t),o=A(G,n,t),c=N(J,o,e);if(y(c)/y(o)<C)switch(s){case R.LINE:return[I(r)];case R.RAY:return L(o,e)<-C?[]:[I(r)]}return[]}function w(n,s,r){return t(a(r,n),s*s,C)?[I(r)]:[]}function U(t,n,{start:s,end:r,type:e}){return p(t.start,s[0],s[1],n),p(t.end,r[0],r[1],n),t.type=B[e],t}var z;!function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"}(z||(z={}));const B={[z.PLANE]:R.LINE,[z.HALF_PLANE]:R.RAY},C=1e-6,D=P(),G=P(),J=P(),K=P(),O=P(),Q=P(),S=P(),T={start:P(),end:P(),type:R.LINE},V={start:P(),end:P(),type:R.LINE};export{R as LineType,z as VerticalPlaneType,C as epsilon,q as intersectLineAndPoint,g as intersectLineLike,x as intersectLineLikeAndVerticalCylinder,w as intersectVerticalCylinderAndPoint,v as intersectVerticalPlane,j as intersectVerticalPlaneAndLineLike,k as intersectVerticalPlaneAndPoint,Y as intersectVerticalPlaneAndVerticalCylinder,_ as pointToLineLikeDistance,F as pointToVerticalCylinderDistance,b as pointToVerticalPlaneDistance,H as projectPointToLineLike,l as projectPointToVerticalCylinder,M as projectPointToVerticalPlane};
