/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{CIMAnalyzer as e}from"../../../../symbols/cim/cimAnalyzer.js";import{ExpandedCIM as t}from"../../../../symbols/cim/ExpandedCIM.js";import{fetchCIMSymbolReference as a}from"./webStyleUtils.js";const i=async(a,i,r)=>{const n=new e(r,i);return new t(await n.analyzeSymbolReference(a.data,!1),a.data,a.rendererKey,a.maxVVSize)};async function r(e,t,r,n){if(!e)return null;if("cim"===e.type)return i(e,t,r);if("web-style"===e.type){const l={type:"cim",data:await a(e,null,n)??void 0,rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return i(l,t,r)}return e}function n(e){if(!e)return null;const{avoidSDFRasterization:t,type:a,cim:i,url:r,materialHash:n,maxVVSize:l}=e,m={cim:i,type:a,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(a){case"marker":l&&"size"in i&&(i.size=Math.max(l,i.size)),m.size=e.size,m.path=e.path,m.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":m.dashTemplate=e.dashTemplate;break;case"text":m.text=e.text,m.fontName=e.fontName}return m}export{n as cimLayerToRasterizationInfo,r as expandSymbol};
