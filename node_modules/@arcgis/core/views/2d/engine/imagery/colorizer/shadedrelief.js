/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{getProjectionDefines as r,getInterpolationDefines as t}from"./utils.js";import{setTextures as o,setUniforms as e,getColormapUniforms as s,getShadedReliefUniforms as a}from"../../../../webgl/rasterUtils.js";const n={vsPath:"raster/common",fsPath:"raster/hillshade",attributes:new Map([["a_position",0],["a_texcoord",1]])};function m(o,e,s){const{colormap:a}=e.symbolizerParameters,m=[...s?[]:r(e.transformGrid),...t(e.interpolation,null!=a,o.context)];null!=a&&m.push("applyColormap");return{defines:m,program:o.painter.materialManager.getProgram(n,m)}}function i(r,t,n,m,i=!1){const{names:l,textures:c}=n.getTextures({useProcessedTexture:i});o(r.context,t,l,c),e(t,m,n.commonUniforms),t.setUniformMatrix3fv("u_dvsMat3",n.transforms.dvs);const f=n.symbolizerParameters,{colormap:u,colormapOffset:p}=f;if(null!=u){const r=s(u,p);e(t,m,r)}const d=a(f);e(t,m,d)}const l={createProgram:m,bindTextureAndUniforms:i};export{l as default};
