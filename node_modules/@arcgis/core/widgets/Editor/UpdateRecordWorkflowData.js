/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import t from"../../core/Accessor.js";import o from"../../core/Error.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/accessorSupport/ensureType.js";import"../../core/arrayUtils.js";import"../../core/has.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";import{Edits as i}from"./Edits.js";import{findLayerInfo as a}from"./workflowUtils.js";var p;let d=p=class extends t{constructor(e){super(e),this.attachmentsCapabilities=null,this.editableItem=null,this.edits=null,this.formTemplate=null,this.viewModel=null}static async create(e){const t=p._makeConstructorProps(e);return new p(t)}static _makeConstructorProps(e){const{feature:t,viewModel:r}=e,s=r.editableItems.find((e=>e.layer===t.layer));if(!s)throw new o("no-editableItem-found","The EditorViewModel provided did not have an EditableItem associated with the specified Graphic's layer");const p=a(r.layerInfos,t.sourceLayer),d=s.supports,l=d.includes("create"),c=d.includes("update");return{attachmentsCapabilities:{editing:!0,operations:{add:l||c,update:c,delete:c}},editableItem:s,edits:new i({feature:t}),formTemplate:p?.formTemplate,viewModel:r}}};e([r()],d.prototype,"attachmentsCapabilities",void 0),e([r()],d.prototype,"editableItem",void 0),e([r()],d.prototype,"edits",void 0),e([r()],d.prototype,"formTemplate",void 0),e([r()],d.prototype,"viewModel",void 0),d=p=e([s("esri.widgets.Editor.UpdateRecordWorkflowData")],d);const l=d;export{l as default};
