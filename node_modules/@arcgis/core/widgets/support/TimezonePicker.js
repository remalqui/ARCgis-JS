/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import{property as e}from"../../core/accessorSupport/decorators/property.js";import"../../core/accessorSupport/ensureType.js";import"../../core/arrayUtils.js";import"../../core/has.js";import{subclass as o}from"../../core/accessorSupport/decorators/subclass.js";import s from"../Widget.js";import{loadCalciteComponents as i}from"./componentsUtils.js";import{getTimezoneInfos as n}from"./timeWidgetUtils.js";import"./widgetUtils.js";import{messageBundle as r}from"./decorators/messageBundle.js";import{tsx as c}from"./jsxFactory.js";const p="esri-timezone-picker",l={base:p,trigger:`${p}__trigger`,itemTitle:`${p}__item-title`,itemDescription:`${p}__item_description`};let d=class extends s{constructor(t,e){super(t,e),this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{this.open=!0,this.onOpen?.()},this._onClose=()=>{this.open=!1,this.onClose?.()},this._killEvent=t=>(t.stopPropagation(),!0),this._onChange=t=>{const e=t.target,o=e.selectedItems?.[0].getAttribute("data-id"),s=a(this._gmtOffsets,o)?.utcOffset;s&&(this._selectedId=o,this.onChange?.(s))}}loadDependencies(){return i({button:()=>import("@esri/calcite-components/dist/components/calcite-button.js"),dropdown:()=>import("@esri/calcite-components/dist/components/calcite-dropdown.js"),"dropdown-group":()=>import("@esri/calcite-components/dist/components/calcite-dropdown-group.js"),"dropdown-item":()=>import("@esri/calcite-components/dist/components/calcite-dropdown-item.js")})}render(){const t=this._messages;if(!t)return c("div",{key:"empty",class:l.base});const e=this._selectedItem,o=u(e);return c("div",{key:"container",class:l.base,onpointerdown:this._killEvent},c("calcite-dropdown",{overlayPositioning:"fixed",open:this.open,placement:"bottom-end",scale:"s",onCalciteDropdownSelect:this._onChange,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownClose:this._onClose},c("calcite-button",{appearance:"transparent",class:l.trigger,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:t.chooseTimezone},e?.short??""),c("calcite-dropdown-group",{selectionMode:"single",scale:"s"},this._gmtOffsets.map((t=>{const e=u(t);return c("calcite-dropdown-item",{key:e,"data-id":e,selected:o===e},c("div",{key:"title",class:l.itemTitle},t.shortWithUTC),c("div",{key:"description",class:l.itemDescription},t.long))})))))}get _gmtOffsets(){const t=this._messages;return t?n(t):[]}get _selectedItem(){const t=this._gmtOffsets,e=this.value,o=a(t,this._selectedId);return o?.utcOffset===e?o:m(t,e)}};function a(t,e){return t.find((t=>u(t)===e))}function m(t,e){return t.find((t=>t.utcOffset===e))}function u(t){return t?`${t.utcOffset}-${t.long}`:void 0}t([e()],d.prototype,"value",void 0),t([e()],d.prototype,"onChange",void 0),t([e()],d.prototype,"open",void 0),t([e()],d.prototype,"onOpen",void 0),t([e()],d.prototype,"onClose",void 0),t([e(),r("esri/widgets/support/t9n/timezone")],d.prototype,"_messages",void 0),t([e()],d.prototype,"_gmtOffsets",null),t([e()],d.prototype,"_selectedItem",null),t([e()],d.prototype,"_selectedId",void 0),d=t([o("esri.widgets.support.TimezonePicker")],d);export{l as CSS,p as CSS_BASE,d as TimezonePicker};
