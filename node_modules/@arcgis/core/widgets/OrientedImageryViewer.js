/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import{property as t}from"../core/accessorSupport/decorators/property.js";import{cast as i}from"../core/accessorSupport/decorators/cast.js";import"../core/arrayUtils.js";import"../core/has.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import o from"./Widget.js";import s from"./OrientedImageryViewer/OrientedImageryViewerViewModel.js";import{loadCalciteComponents as n}from"./support/componentsUtils.js";import"./support/widgetUtils.js";import{messageBundle as a}from"./support/decorators/messageBundle.js";import{tsx as l}from"./support/jsxFactory.js";import{isDarkTheme as c}from"../support/themeUtils.js";const d="esri-oriented-imagery-viewer",m={addCoverage:`${d}__body-additional-coverage`,addExpPoints:`${d}__body-additional-camera-locations`,base:"esri-oriented-imagery-viewer",body:`${d}__body`,calciteThemeDark:"calcite-mode-dark",calciteThemeLight:"calcite-mode-light",close:`${d}__close`,currentCoverage:`${d}__body-current-coverage`,footprint:`${d}__body-footprint`,header:`${d}__header`,messageBox:`${d}__message-box`,submenu:`${d}__submenu`,title:`${d}__title`,titleContainer:`${d}__title-container`,viewer:`${d}__viewer`,viewerContainer:`${d}__viewer-container`},p={closeButton:!0,coverageMenu:!0,imageMenu:!0,viewerTools:!0,title:!0};let g=class extends o{constructor(e,t){super(e,t),this.isDocked=!1,this.viewModel=new s,this.messagesCommon=null,this.visibleElements={...p},this._actionItems=new Map,this.renderTitleContainer=this.renderTitleContainer.bind(this),this.renderTitle=this.renderTitle.bind(this),this.renderViewerContainer=this.renderViewerContainer.bind(this),this.renderViewer=this.renderViewer.bind(this)}loadDependencies(){return n({tooltip:()=>import("@esri/calcite-components/dist/components/calcite-tooltip.js"),action:()=>import("@esri/calcite-components/dist/components/calcite-action.js"),"action-group":()=>import("@esri/calcite-components/dist/components/calcite-action-group.js"),"action-bar":()=>import("@esri/calcite-components/dist/components/calcite-action-bar.js"),panel:()=>import("@esri/calcite-components/dist/components/calcite-panel.js")})}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...p,...e}}_storeActionElement(e){this._actionItems.set(e.text,e)}_toggleAdditionalCameraLocations(){this.viewModel.toggleAdditionalCameraLocations()}_toggleAdditionalCoverage(){this.viewModel.toggleAdditionalCoverage()}_toggleCurrentCoverage(){this.viewModel.toggleCurrentCoverage()}renderActionTooltips(){return[...this._actionItems].map((([e,t])=>l("calcite-tooltip",{key:e,label:e,referenceElement:t},l("span",null,e))))}renderBody(){return l("div",{class:m.body},this.visibleElements.coverageMenu&&this.renderMenuBarContainer(),this.renderViewerContainer())}renderHeader(){return l("div",{class:m.header},this.renderTitleContainer())}renderMenuBarContainer(){const{isCurrentCoverageDisabled:e,isCurrentCoverageVisible:t,isAdditionalCoverageDisabled:i,isAdditionalCoverageVisible:r,isAdditionalPointSourcesDisabled:o,isAdditionalPointSourcesVisible:s}=this.viewModel;return l("calcite-action-bar",{layout:"horizontal",expandDisabled:!0},l("calcite-action-group",{layout:"horizontal"},l("calcite-action",{text:this.messages.currentFootprint,icon:"trapezoid-area",class:m.currentCoverage,bind:this,active:!e&&t,disabled:e,onclick:this._toggleCurrentCoverage,afterCreate:this._storeActionElement}),l("calcite-action",{text:this.messages.additionalFootprints,icon:"trapezoid-area",class:m.addCoverage,bind:this,active:!i&&r,disabled:i,onclick:this._toggleAdditionalCoverage,afterCreate:this._storeActionElement}),l("calcite-action",{text:this.messages.additionalCameraLocations,icon:"circle-area",class:m.addExpPoints,bind:this,disabled:o,active:!o&&s,onclick:this._toggleAdditionalCameraLocations,afterCreate:this._storeActionElement}),this.renderActionTooltips()))}renderMessageBox(){const{displayMessage:e}=this.viewModel;return e?l("span",{class:m.messageBox+"--"+e.type},this.messages[e.key],e?.data):null}renderTitleContainer(){return l("div",{class:m.titleContainer},this.renderTitle())}renderTitle(){return l("span",{class:m.title},this.messages.title)}renderViewerContainer(){return l("div",{class:m.viewerContainer},this.renderViewer(),this.renderMessageBox())}renderViewer(){const{displayMessage:e}=this.viewModel;return l("div",{bind:this,afterCreate:this.viewModel.loadViewer,class:`${m.viewer}${e?"--hide":""}`})}render(){const{updating:e}=this.viewModel;return l("calcite-panel",{class:this.classes(`${m.base}--${this.isDocked?"docked":"floating"}`,c()?m.calciteThemeDark:m.calciteThemeLight),bind:this},this.visibleElements.title&&this.renderHeader(),l("calcite-panel",{loading:e},this.renderBody()))}};e([t()],g.prototype,"isDocked",void 0),e([t({type:s})],g.prototype,"viewModel",void 0),e([t(),a("esri/widgets/OrientedImageryViewer/t9n/OrientedImageryViewer")],g.prototype,"messages",void 0),e([t(),a("esri/t9n/common")],g.prototype,"messagesCommon",void 0),e([t()],g.prototype,"view",null),e([t()],g.prototype,"visibleElements",void 0),e([i("visibleElements")],g.prototype,"castVisibleElements",null),g=e([r("esri.widgets.OrientedImageryViewer")],g);const h=g;export{h as default};
